FastComments пружа једноставно за коришћење SSO решење. Ажурирање података корисника помоћу интеграције засноване на HMAC-у је једноставно као да корисник учита страницу са ажурираним пакетом података.

Међутим, можда ћете желети да управљате корисником ван тог тока, ради побољшања конзистентности ваше апликације.

SSO User API нуди начин за CRUD операције над објектима које називамо SSOUsers. Ови објекти се разликују од редовних Users и држе се одвојено ради типске сигурности.

Структура SSOUser објекта је следећа:

[inline-code-attrs-start title = 'SSOUser Структура'; type = 'typescript'; isFunctional = false; inline-code-attrs-end]
[inline-code-start]
interface SSOUser {
    id: string
    username: string
    email?: string
    websiteUrl?: string
    signUpDate: number
    createdFromUrlId?: string
    loginCount?: number
    avatarSrc?: string
    optedInNotifications?: boolean
    optedInSubscriptionNotifications?: boolean
    displayLabel?: string
    displayName?: string
    isAccountOwner?: boolean // Администраторска дозвола - SSO корисници са овим флагом се наплаћују као SSO администратори (одвојено од редовних SSO корисника)
    isAdminAdmin?: boolean // Администраторска дозвола - SSO корисници са овим флагом се наплаћују као SSO администратори (одвојено од редовних SSO корисника)
    isCommentModeratorAdmin?: boolean // Модераторска дозвола - SSO корисници са овим флагом се наплаћују као SSO модератори (одвојено од редовних SSO корисника)
    /** Ако је null, Контрола приступа неће бити примењена на корисника. Ако је списак празан, овај корисник неће моћи да види ниједну страницу или да @спомиње друге кориснике. **/
    groupIds?: string[] | null
    createdFromSimpleSSO?: boolean
    /** Не дозвољавајте другим корисницима да виде активност овог корисника, укључујући коментаре, на њиховом профилу. Подразумевано је true како би профили подразумевано били безбедни. **/
    isProfileActivityPrivate?: boolean
    /** Не дозвољавајте другим корисницима да остављају коментаре на профилу корисника, или да виде постојеће коментаре на профилу. Подразумевано false. **/
    isProfileCommentsPrivate?: boolean
    /** Не дозвољавајте другим корисницима да шаљу директне поруке овом кориснику. Подразумевано false. **/
    isProfileDMDisabled?: boolean
    karma?: number
    /** Опционо подешавање за значке корисника. **/
    badgeConfig?: {
        /** Низ ИД-ова значки које се додељују кориснику. Ограничено на 30 значки. Редослед се поштује. **/
        badgeIds: string[]
        /** Ако је true, замењује све постојеће приказане значке са наведеним. Ако је false или изостављено, наведене значке ће се додати постојећима. **/
        override?: boolean
        /** Ако је true, ажурира приказне особине значки из конфигурације закупца. **/
        update?: boolean
    }
}
[inline-code-end]

### Наплата за SSO кориснике

SSO корисници се наплаћују различито у зависности од њихових дозвола:

- **Редовни SSO корисници**: Корисници без админ или модераторских дозвола се наплаћују као редовни SSO корисници
- **SSO администратори**: Корисници са `isAccountOwner` или `isAdminAdmin` флаговима се наплаћују посебно као SSO администратори (иста цена као редовни администратори закупца)
- **SSO модератори**: Корисници са `isCommentModeratorAdmin` флагом се наплаћују посебно као SSO модератори (иста цена као редовни модератори)

**Важно**: Да би се спречило двоструко наплаћивање, систем аутоматски уклања дупликате SSO корисника у односу на редовне tenant кориснике и модераторе по email адреси. Ако SSO корисник има исту email адресу као редовни tenant корисник или модератор, неће бити наплаћени два пута.

### Контрола приступа

Корисници се могу груписати у групе. За то служи поље `groupIds`, и оно је опционo.

### @Спомињања

По подразумевaњу, `@mentions` користе `username` за претрагу других SSO корисника када се укуца карактер `@`. Ако је коришћено `displayName`, резултати који се поклапају са `username` ће бити занемарени када постоји поклапање за `displayName`, и резултати претраге за `@mention` ће користити `displayName`.

### Претплате

У FastComments-у, корисници се могу претплатити на страницу кликом на икону звона у видгету за коментаре и одабиром 'Претплати се'.

Код редовног корисника, шаљемо им мејлове са обавештењима у складу са њиховим подешавањима обавештења.

Код SSO корисника, то је подељено ради назадне компатибилности. Корисници ће добијати додатне мејлове обавештења о претплати само ако поставите `optedInSubscriptionNotifications` на `true`.

### Значке

Можете доделити значке SSO корисницима користећи својство `badgeConfig`. Значке су визуелни индикатори који се појављују поред имена корисника у коментарима.

- `badgeIds` - Низ ИД-ова значки које се додељују кориснику. То морају бити валидни ИД-ови значки креирани на вашем FastComments налогу. Ограничено на 30 значки.
- `override` - Ако је true, све постојеће значке приказане у коментарима ће бити замењене наведеним. Ако је false или изостављено, наведене значке ће бити додате постојећим значкама.
- `update` - Ако је true, приказне особине значки биће ажуриране из конфигурације закупца сваки пут када се корисник пријави.

---