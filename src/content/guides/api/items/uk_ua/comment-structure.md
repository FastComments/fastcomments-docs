Об'єкт `Comment` представляє коментар, залишений користувачем.

Взаємовідносини між батьківськими та дочірніми коментарями визначаються через `parentId`.

Структура об'єкта `Comment` наступна:

[inline-code-attrs-start title = "Структура об'єкта Comment"; type = 'typescript'; isFunctional = false; inline-code-attrs-end]
[inline-code-start]
interface Comment {
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Встановлено у true, якщо механізм виявив, що коментар є спамом. **/
    aiDeterminedSpam?: boolean
    /** Чи схвалено показ коментаря. Встановлюється true при збереженні коментаря, інакше він буде приховано. **/
    approved?: boolean
    /** Аватар користувача. **/
    avatarSrc?: string
    /** Дочірні коментарі. Не заповнюються в усіх сценаріях. Використовується, коли через API встановлено asTree = true. **/
    children: Comment[]
    /** Незмінений (оригінальний) текст коментаря. **/
    comment: string
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Текст коментаря, розпарсений у HTML. **/
    commentHTML?: string
    /** Електронна пошта автора коментаря. Обов'язково, якщо анонімні коментарі вимкнені. **/
    commenterEmail?: string
    /** Посилання автора коментаря (наприклад, їхній блог). **/
    commenterLink?: string
    /** Ім'я автора коментаря. Завжди обов'язкове. Якщо недоступне, вкажіть щось на кшталт "Anonymous". **/
    commenterName: string
    /** Дата залишення коментаря у форматі UTC epoch. **/
    date: number
    /** «Показувана мітка» для коментаря - наприклад "Admin", "Moderator", або щось на кшталт "VIP User". **/
    displayLabel?: string
    /** Домен, на якому опубліковано коментар. **/
    domain?: string
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Кількість разів, коли коментар було позначено. **/
    flagCount?: number
    /** #хештеги, написані в коментарі, які були успішно розпарсені. Також можна вручну додавати хештеги, для запитів, але вони автоматично не відображатимуться в тексті коментаря. **/
    hashTags?: CommentHashTag[]
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Чи містить коментар зображення? **/
    hasImages?: boolean
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Чи містить коментар посилання? **/
    hasLinks?: boolean
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Унікальний ідентифікатор коментаря. **/
    id: string
    /** Лише при створенні! Це хешується для зберігання. **/
    ip?: string
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Чи заблокував поточний користувач автора цього коментаря? **/
    isBlocked?: boolean
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Чи є коментар від адміністратора? Автоматично встановлюється на основі userId. **/
    isByAdmin?: boolean
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Чи є коментар від модератора? Автоматично встановлюється на основі userId. **/
    isByModerator?: boolean
    /** Встановіть true, якщо коментар було м'яко видалено (залишено замінник через іншу конфігурацію). **/
    isDeleted?: boolean
    /** Встановіть true, якщо акаунт користувача було видалено і коментар довелося зберегти. **/
    isDeletedUser?: boolean
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Чи позначив цей коментар поточний залогінений користувач (contextUserId)? **/
    isFlagged?: boolean
    /** Чи закріплено коментар? **/
    isPinned?: boolean
    /** Чи заблоковано коментар для нових відповідей (модератори все ще можуть відповідати)? **/
    isLocked?: boolean
    /** Чи є коментар спамом? **/
    isSpam?: boolean
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Чи проголосував поточний користувач (contextUserId) проти цього коментаря? **/
    isVotedDown?: boolean
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Чи проголосував поточний користувач (contextUserId) за цей коментар? **/
    isVotedUp?: boolean
    /** Локаль, якою написано коментар. Якщо не вказано, буде визначено з HTTP заголовка Accept-Language. **/
    locale?: 'de_de' | 'en_us' | 'es_es' | 'fr_fr' | 'it_it' | 'ja_jp' | 'ko_kr' | 'pl_pl' | 'pt_br' | 'ru_ru' | 'tr_tr' | 'zh_cn' | 'zh_tw'
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: @згадки, написані в коментарі, які були успішно розпарсені. **/
    mentions?: CommentUserMention[]
    /** Необов'язкові метадані, пов'язані з коментарем. **/
    meta?: Record<string, string | number | boolean>
    /** Необов'язковий список id груп модерації, пов'язаних з цим коментарем. **/
    moderationGroupIds?: string[]|null
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Ідентифікатор об'єкта голосування, що відповідає голосу поточного користувача (contextUserId) за цей коментар. **/
    myVoteId?: string
    /** Чи було надіслано повідомлення для авторів коментарів щодо цього коментаря. Щоб запобігти відправленню повідомлень під час імпорту, встановіть це у true. **/
    notificationSentForParent?: boolean
    /** Чи було надіслано повідомлення для користувачів тенанта щодо цього коментаря. Щоб запобігти відправленню повідомлень під час імпорту, встановіть це у true. **/
    notificationSentForParentTenant?: boolean
    /** Заголовок сторінки, на якій був цей коментар. **/
    pageTitle?: string
    /** Якщо ми відповідаємо на коментар, це ID коментаря, на який ми відповідаємо. **/
    parentId?: string|null
    /** Чи позначено коментар як перевірений. **/
    reviewed: boolean
    /** Ідентифікатор тенанта, якому належить коментар. **/
    tenantId: string
    /** Користувач, який написав коментар. Створюється автоматично при збереженні коментаря з ім'ям/електронною поштою. **/
    userId?: string|null
    /** URL місця, де видно цей коментар, наприклад допис у блозі. **/
    url: string
    /** «Очищена» версія urlId, яку ви передали. При збереженні ви вказуєте це поле, але коли отримаєте коментар назад це буде «очищене», а ваше оригінальне значення переміститься до "urlIdRaw". **/
    urlId: string
    /** ТІЛЬКИ ДЛЯ ЧИТАННЯ: Оригінальний urlId, який ви передали. **/
    urlIdRaw?: string
    /** Чи перевірено користувача і цей коментар? **/
    verified: boolean
    /** Кількість голосів за. **/
    votesUp?: number
    /** Кількість голосів проти. **/
    votesDown?: number
    /** «Карма» коментаря (= votes up - votes down). **/
    votes?: number
}
[inline-code-end]

Деякі з цих полів позначені як `READONLY` — вони повертаються API, але їх не можна встановити.

### Структура тексту коментаря

Коментарі пишуться у власному діалекті markdown від FastComments, який є стандартним markdown плюс традиційні `bbcode`-подібні теги для зображень, такі як `[img]path[/img]`.

Текст зберігається у двох полях. Текст, який ввів користувач, зберігається без змін у полі `comment`. Його відрендерений варіант зберігається у полі `commentHTML`.

Дозволені HTML-теги: `b, u, i, strike, pre, span, code, img, a, strong, ul, ol, li, and br`.

Рекомендується рендерити HTML, оскільки це дуже невеликий піднабір HTML, і створити рендерер досить просто. Існує кілька бібліотек, наприклад для React Native і Flutter, які можуть у цьому допомогти.

Ви можете обрати рендеринг ненормалізованого значення поля `comment`. [Приклад парсера тут.](https://github.com/FastComments/fastcomments-code-examples/blob/master/custom-client/client/parse-comment.js).

Приклад парсера також можна налаштувати для роботи з HTML і перетворювати HTML-теги у очікувані елементи для рендерингу на вашій платформі.

### Тегування

Коли користувачів згадують у коментарі, інформація зберігається у списку `mentions`. Кожен об'єкт у цьому списку має таку структуру.

[inline-code-attrs-start title = 'Об\'єкт згадки коментаря'; type = 'typescript'; inline-code-attrs-end]
[inline-code-start]
interface CommentUserMention {
    /** Ідентифікатор користувача. Для SSO-користувачів до нього буде додано префікс ідентифікатора вашого тенанта. **/
    id: string
    /** Остаточний текст @mention, включно зі символом @. **/
    tag: string
    /** Початковий текст @mention, включно зі символом @. **/
    rawTag: string
    /** Тип тегнутого користувача. user = обліковий запис FastComments.com. sso = SSOUser. **/
    type: 'user'|'sso'
    /** Якщо користувач відмовився від повідомлень, це поле все одно буде встановлено в true. **/
    sent: boolean
}
[inline-code-end]

### Хештеги

Коли хештеги використовуються і успішно розпізнаються, інформація зберігається в масиві `hashTags`. Кожен об'єкт у цьому масиві має таку структуру. Хештеги також можна додавати вручну в масив `hashTags` коментаря для запитів, якщо встановлено `retain`.

[inline-code-attrs-start title = 'Об\'єкт хештегу коментаря'; type = 'typescript'; inline-code-attrs-end]
[inline-code-start]
interface CommentHashTag {
    /** Ідентифікатор хештегу. **/
    id: string
    /** Остаточний текст #hashtag, включно зі символом #. **/
    tag: string
    /** Якщо хештег пов'язано зі спеціальною URL-адресою, це поле буде визначене. **/
    url?: string
    /** Якщо потрібно зберегти хештег, навіть якщо він не існує в тексті коментаря при оновленні. Корисно для тегування коментарів без зміни тексту. **/
    retain?: boolean
}
[inline-code-end]