---
### 백분율 기반 위치 지정

Image Chat는 이미지 위의 채팅 마커를 위치시키기 위해 픽셀 좌표 대신 백분율 기반 좌표를 사용합니다. 사용자가 이미지에서 클릭하면 위젯은 클릭의 픽셀 좌표를 이미지 너비와 높이의 백분율로 변환합니다. 이 방식은 이미지가 어떻게 표시되든 마커가 올바른 위치에 유지되도록 보장합니다.

예를 들어, 사용자가 너비가 1000px인 이미지의 왼쪽 가장자리에서 250픽셀 지점을 클릭하면 위젯은 이를 왼쪽에서 25%로 저장합니다. 다른 사용자가 모바일 기기에서 동일한 이미지를 너비 500px로 볼 때, 마커는 왼쪽에서 125픽셀 지점에 나타나며, 이는 여전히 너비의 25%입니다.

### 반응형 레이아웃에 대한 이점

이 백분율 시스템은 모든 기기 크기와 방향에서 Image Chat이 원활하게 작동하도록 합니다. 화면 너비, CSS 규칙, 또는 컨테이너 제약에 따라 이미지가 서로 다른 크기로 표시될 수 있지만, 마커는 항상 의도된 위치에 정확히 정렬됩니다.

대형 모니터를 사용하는 데스크톱 사용자는 소형 화면의 스마트폰 사용자가 보는 것과 동일한 상대적 위치에 마커를 봅니다. 마커는 이미지 자체와 비례하여 크기가 조정됩니다.

### 이미지 스케일링 및 종횡비

이미지가 스케일될 때 종횡비를 유지하는 한(이는 브라우저의 기본 동작입니다) 백분율 기반 마커는 완벽하게 정렬된 상태를 유지합니다. 위젯은 이미지가 비례적으로 스케일된다고 가정하고 이 가정에 기반해 위치를 계산합니다.

특정 치수와 함께 `object-fit: cover`와 같이 이미지 종횡비를 왜곡하는 CSS를 적용하면 마커 위치가 올바르게 정렬되지 않을 수 있습니다. 최상의 결과를 위해 이미지를 자연스럽게 스케일하도록 허용하거나 종횡비를 유지하기 위해 `object-fit: contain`을 사용하십시오.

### 채팅 사각형 크기

채팅 마커의 시각적 크기도 백분율 기반입니다. `chatSquarePercentage` 구성 옵션은 기본값이 5%이며, 이는 각 사각형이 이미지 너비의 5%임을 의미합니다. 이는 서로 다른 이미지 크기에서도 시각적 비중을 일관되게 유지합니다.

기본 5% 설정을 적용한 너비 1000px 이미지에서는 마커가 50px 정사각형입니다. 너비 500px 이미지에서는 동일한 마커가 25px 정사각형이 됩니다. 마커는 이미지 크기에 비례합니다.

### 모바일 동작

너비가 768px 미만인 화면에서는 Image Chat이 모바일 최적화 레이아웃으로 전환됩니다. 채팅 창은 마커 옆에 떠 있는 대신 전체 화면으로 열립니다. 이는 작은 화면에서 떠 있는 창이 이미지의 많은 부분을 가리는 문제를 줄여 더 나은 사용성을 제공합니다.

마커 자체는 여전히 백분율 기반 위치에 표시되고 클릭할 수 있습니다. 사용자는 모든 토론이 어디에 위치하는지 확인하고 마커를 탭하여 전체 화면 채팅 인터페이스를 열 수 있습니다.

### 동적 이미지 로딩

이미지가 비동기적으로 로드되거나 페이지 로드 후 크기가 변경되더라도 백분율 기반 시스템은 올바르게 작동합니다. 위젯은 이미지 요소를 감시하고 이미지 치수가 변경될 때마다 마커 위치를 재계산합니다.

이미지를 지연 로드하거나 서로 다른 브레이크포인트에서 다른 크기의 반응형 이미지를 구현하는 경우에도 이미지 크기가 변경되면 마커가 자동으로 조정됩니다.

### 기기 간 일관성

좌표가 데이터베이스에 백분율로 저장되므로 데스크톱에서 생성된 토론은 태블릿이나 휴대폰에서 볼 때도 정확히 동일한 상대적 위치에 나타납니다. 사용자는 위치 불일치 없이 여러 기기에서 협업할 수 있습니다.

이 동작은 양방향으로 작동합니다. 모바일 기기에서 특정 지점을 탭하여 생성한 토론은 대형 데스크톱 모니터에서 볼 때도 동일한 상대적 위치에 나타납니다.

### 뷰포트 고려사항

위젯은 뷰포트가 아니라 이미지 요소 자체를 기준으로 백분율을 계산합니다. 이는 페이지를 스크롤하거나 브라우저 창 크기를 변경해도 마커 위치에 영향을 주지 않음을 의미합니다. 마커는 뷰포트 변경과 무관하게 이미지상의 위치에 고정됩니다.

### 미래 대비 콘텐츠

백분율 기반 접근 방식은 레이아웃, 디자인 또는 기기 생태계의 변경에 대해 이미지 토론을 탄력적으로 만듭니다. 새로운 화면 크기와 기기가 등장하더라도 기존 토론은 업데이트나 마이그레이션 없이도 계속 올바르게 표시됩니다.

---