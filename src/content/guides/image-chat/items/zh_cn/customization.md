### 深色模式支持

Image Chat 包含内置的深色模式支持。当您在配置中将 `hasDarkBackground: true` 设置为 true 时，聊天窗口和 UI 元素会自动调整以适应深色背景。

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    hasDarkBackground: true
});
```

深色模式样式适用于聊天窗口、标记方块和所有交互元素。如果您站点有深色模式切换，可以在模式更改时重新初始化小部件，或者使用下面描述的 body class 方法。

### 动态深色模式

如果您站点的深色模式是通过向 body 元素添加 `.dark` 类来控制的，Image Chat UI 会自动响应这一点，而无需重新初始化。该小部件的样式设计为会对该类的存在作出响应。

```css
/* 您的深色模式 CSS */
body.dark {
    background: #1a1a1a;
    color: #ffffff;
}
```

### 使用 CSS 的自定义样式

您可以使用 CSS 自定义标记、聊天窗口和其他元素的外观。该小部件会添加特定的类，您可以在样式表中针对这些类进行样式设置。

聊天方块和窗口使用 FastComments 的评论气泡样式系统，因此您对标准评论小部件所做的任何自定义也会影响 Image Chat。

### 聊天方块大小

`chatSquarePercentage` 选项控制可点击标记的大小。默认是图像宽度的 5%：

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    chatSquarePercentage: 7  // 更大、更醒目的方块
});
```

较小的值会创建更细微的标记，使其更融合于图像。较大的值会使标记更突出、更容易点击，尤其是在移动设备上或为了无障碍目的。

### 移动端行为

在宽度小于 768px 的屏幕上，Image Chat 会自动切换到移动优化布局。聊天窗口将以全屏方式出现，而不是在标记旁浮动，从而在小屏幕上提供更好的可用性。

标记仍会在图像上的响应位置可见。用户可以点击任何标记以打开全屏聊天界面。此行为为内置功能，无需任何配置。

### 聊天窗口外观

在桌面端，聊天窗口宽度为 300px，并有一个指向标记的 16px 箭头。窗口会根据可用视口空间自动定位，使用类似 `to-right`、`to-left`、`to-top` 和 `to-bottom` 的定位类。

您可以添加自定义 CSS 来调整这些窗口的颜色、字体、间距或其他视觉属性。聊天窗口使用与标准 FastComments 小部件相同的组件结构，因此它们会继承您应用的任何全局自定义。

### 惰性初始化

聊天窗口在桌面用户悬停时或在创建时立即初始化。这通过仅在用户实际与标记交互时才渲染聊天界面来减少初始加载开销。

惰性初始化是透明进行的。用户不会注意到任何延迟，但如果图像上有许多标记，浏览器就不需要渲染几十个隐藏的聊天窗口。

### 本地化

Image Chat 支持与标准 FastComments 小部件相同的所有本地化选项。设置 `locale` 选项以在不同语言中显示 UI 文本：

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    locale: 'fr'  // 法语
});
```

FastComments 支持多种语言。locale 设置会影响所有 UI 文本，包括提示、按钮和占位符文本。

### 继承的自定义选项

由于 Image Chat 扩展了标准评论小部件，它继承了基础小部件的所有自定义选项。这包括自定义 CSS 类、自定义翻译、头像自定义、日期格式化等更多内容。

请参阅 FastComments 的主要自定义文档，以查看可用的完整自定义选项列表。

### 使用自定义字体

如果您的站点使用自定义字体，Image Chat UI 将从页面的 CSS 中继承这些字体。聊天窗口在您的页面 DOM 中渲染，并遵循您现有的排版设置。

为获得最佳效果，请确保在初始化 Image Chat 之前加载好自定义字体，或者接受在字体加载期间可能会有短暂的无样式文本闪烁。

### 标记的视觉设计

方形标记具有细微的视觉设计，使其在不压倒图像的情况下仍然显眼。如果您想要不同的视觉处理，可以使用 CSS 自定义它们的外观。

标记包含悬停状态，当用户将鼠标移动到其上方时会提供反馈。在触摸设备上，点击交互会通过打开聊天窗口提供即时反馈。

---