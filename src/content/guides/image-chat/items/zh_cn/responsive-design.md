### Percentage-Based Positioning

Image Chat 使用基于百分比的坐标来定位图像上的聊天标记，而不是像素坐标。当用户点击图像时，小部件会将点击的像素坐标转换为图像宽度和高度的百分比。这种方法可确保无论图像如何显示，标记都保持在正确的位置。

例如，如果用户在一个宽度为 1000px 的图像上从左边缘向右点击 250 像素，小部件会将此存储为距左侧 25%。当另一个用户在移动设备上以 500px 宽查看同一图像时，标记会显示在距左侧 125 像素的位置，这仍然是宽度的 25%。

### Benefits for Responsive Layouts

该百分比系统使 Image Chat 能在所有设备大小和方向上无缝工作。根据屏幕宽度、CSS 规则或容器约束，你的图像可能以不同尺寸显示，但标记始终与预期位置对齐。

在大型显示器的桌面电脑上的用户，会在与智能手机小屏幕用户相同的相对位置看到标记。标记会随着图像本身按比例缩放。

### Image Scaling and Aspect Ratio

只要你的图像在缩放时保持纵横比（这是浏览器的默认行为），基于百分比的标记将保持完美对齐。小部件假定图像按比例缩放并基于此假设计算位置。

如果你应用会扭曲图像纵横比的 CSS（例如使用 `object-fit: cover` 并设置特定尺寸），标记位置可能无法正确对齐。为了获得最佳效果，允许图像自然缩放或使用 `object-fit: contain` 来保持纵横比。

### Chat Square Sizing

聊天标记的视觉大小也是基于百分比的。`chatSquarePercentage` 配置选项的默认值为 `5%`，意味着每个方块为图像宽度的 5%。这能确保在不同图像大小下视觉权重的一致性。

在宽度为 1000px 的图像上，使用默认的 5% 设置时，标记为 50px 的方块。在宽度为 500px 的图像上，相同的标记为 25px 的方块。它们始终与图像大小成比例。

### Mobile Behavior

在宽度小于 768px 的屏幕上，Image Chat 会切换到为移动设备优化的布局。聊天窗口会全屏打开，而不是浮动在标记旁边。这在小屏幕上更易用，因为浮动窗口会遮挡过多图像内容。

标记本身仍然可见并可在其基于百分比的位置被点击。用户仍然可以看到所有讨论的位置并点击标记以打开全屏聊天界面。

### Dynamic Image Loading

即使图像是异步加载或在页面加载后改变大小，基于百分比的系统仍能正常工作。小部件会监控图像元素并在图像尺寸发生变化时重新计算标记位置。

如果你正在进行懒加载图像或在不同断点使用不同尺寸的响应式图像，当图像尺寸改变时，标记会自动调整。

### Cross-Device Consistency

由于坐标以百分比形式存储在数据库中，桌面电脑上创建的讨论在平板或手机上查看时会出现在完全相同的相对位置。用户可以跨设备协作而不会出现位置不一致的情况。

这也是双向有效的。在移动设备上通过点击特定位置创建的讨论，在大屏幕桌面显示器上查看时会出现在相同的相对位置。

### Viewport Considerations

小部件计算的百分比是相对于图像元素本身，而不是视口。这意味着页面滚动或更改浏览器窗口大小不会影响标记位置。无论视口如何变化，标记都固定在图像上的位置。

### Future-Proofing Content

基于百分比的方法使你的图像讨论对布局、设计或设备生态系统的变化具有弹性。随着新的屏幕尺寸和设备的出现，现有的讨论将继续正确显示，而无需任何更新或迁移。