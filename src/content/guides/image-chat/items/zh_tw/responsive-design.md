### 百分比定位

圖片聊天室使用基於百分比的座標，而不是像素座標，來在影像上定位聊天標記。當使用者點擊影像時，元件會將點擊的像素座標轉換為相對於影像寬度和高度的百分比。這種做法可確保標記無論圖像如何顯示都會保持在正確的位置。

例如，如果使用者在一張寬度為 1000px 的影像上從左邊緣向右點擊 250 像素，元件會將這個位置儲存為從左邊緣算起的 25%。當另一位使用者在行動裝置上以 500px 寬度查看相同影像時，標記會出現在從左邊緣 125 像素處，這仍然是寬度的 25%。

### 對響應式佈局的好處

這個百分比系統讓圖片聊天室能在所有裝置尺寸與方向上無縫運作。你的圖像可能會根據螢幕寬度、CSS 規則或容器限制而以不同大小顯示，但標記總是會與預期位置對齊。

使用大型螢幕的桌面電腦使用者會看到與使用小螢幕智慧型手機的使用者相同相對位置的標記。標記會隨著影像本身等比例縮放。

### 影像縮放與長寬比

只要你的影像在縮放時維持其長寬比（這是瀏覽器的預設行為），基於百分比的標記就會保持完美對齊。元件假設影像是等比例縮放，並基於此假設來計算位置。

如果你套用會扭曲影像長寬比的 CSS（例如使用 `object-fit: cover` 並搭配特定尺寸），標記位置可能無法正確對齊。為獲得最佳結果，讓影像自然縮放或使用 `object-fit: contain` 以維持長寬比。

### 聊天方塊大小

聊天標記的視覺大小也是基於百分比的。`chatSquarePercentage` 配置選項預設為 5%，表示每個方塊為影像寬度的 5%。這確保了不同影像尺寸間一致的視覺權重。

在寬度為 1000px 的影像上使用預設 5% 設定時，標記為 50px 的方形。在寬度為 500px 的影像上，相同的標記為 25px 的方形。它們會與影像尺寸保持比例。

### 行動裝置行為

在寬度小於 768px 的螢幕上，圖片聊天室會切換到行動優化的佈局。聊天視窗會以全螢幕方式開啟，而不是浮動在標記旁邊。這在小螢幕上提供更好的可用性，避免浮動視窗遮擋過多影像。

標記本身仍會在其百分比位置上可見且可點擊。使用者仍可看到所有討論的位置，並點選標記以開啟全螢幕聊天介面。

### 動態圖片載入

即使影像是非同步載入或在頁面載入後改變大小，基於百分比的系統仍會正常運作。元件會監控影像元素，並在影像尺寸改變時重新計算標記位置。

如果你使用延遲載入影像或在不同斷點實作具有不同尺寸的響應式影像，當影像尺寸改變時標記會自動調整。

### 跨裝置一致性

因為座標以百分比形式儲存在資料庫中，在桌面電腦建立的討論在平板或手機上查看時會出現在完全相同的相對位置。使用者可以跨裝置協作，而不會產生定位不一致的問題。

這個行為是雙向的。在行動裝置上點選特定位置建立的討論，在大型桌面顯示器上查看時會出現在相同的相對位置。

### 視口考量

元件計算百分比是相對於影像元素本身，而非視口。這表示捲動頁面或改變瀏覽器視窗大小不會影響標記位置。標記會固定在影像上的位置，不受視口變動影響。

### 未來相容性

基於百分比的方法讓你的影像討論能抵抗佈局、設計或裝置生態系的變化。隨著新螢幕尺寸與裝置的出現，既有的討論會持續正確顯示，而不需要任何更新或遷移。