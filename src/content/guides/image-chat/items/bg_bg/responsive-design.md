### Позициониране, базирано на проценти

Image Chat използва координати, базирани на проценти, вместо пикселни координати за позициониране на маркери в изображенията. Когато потребител кликне върху изображение, widget-ът преобразува пикселните координати на клика в проценти от ширината и височината на изображението. Този подход гарантира, че маркерите остават на правилното място независимо от начина, по който изображението се показва.

Например, ако потребителят кликне на 250 пиксела от левия ръб на изображение с ширина 1000px, widget-ът съхранява това като 25% отляво. Когато друг потребител види същото изображение с ширина 500px на мобилно устройство, маркерът се появява на 125 пиксела отляво, което все още е 25% от ширината.

### Предимства за адаптивни оформления

Тази процентна система прави Image Chat безпроблемно работещ на всички размери и ориентации на устройства. Вашите изображения може да се показват с различни размери в зависимост от ширината на екрана, CSS правилата или ограниченията на контейнера, но маркерите винаги се подравняват правилно с предвидените местоположения.

Потребителите на настолни компютри с големи монитори виждат маркерите в същите относителни позиции като потребителите на смартфони с малки екрани. Маркерите се оразмеряват пропорционално на самото изображение.

### Оразмеряване на изображението и съотношение на страните

Докато изображението ви запазва своето съотношение на страните при мащабиране (което е подразбиращото се поведение на браузъра), процентните маркери ще останат перфектно подравнени. Widget-ът предполага, че изображенията се мащабират пропорционално и изчислява позициите въз основа на това предположение.

Ако приложите CSS, което деформира съотношението на страните на изображението (например при използване на `object-fit: cover` със специфични размери), позициите на маркерите може да не се подравнят правилно. За най-добри резултати, позволявайте на изображенията да се мащабират естествено или използвайте `object-fit: contain`, за да запазите съотношението на страните.

### Размер на чат квадратите

Визуалният размер на маркерите за чат също е базиран на проценти. Опцията за конфигурация `chatSquarePercentage` по подразбиране е 5%, което означава, че всяко квадратно поле е 5% от ширината на изображението. Това гарантира последователно визуално тегло при различни размери на изображенията.

На изображение с ширина 1000px с настройка по подразбиране 5%, маркерите са 50px квадратни. На изображение с ширина 500px същите маркери са 25px квадратни. Те остават пропорционални на размера на изображението.

### Поведение на мобилни устройства

На екрани с ширина под 768px, Image Chat преминава към оформление, оптимизирано за мобилни устройства. Чат прозорците се отварят на цял екран вместо да плават до маркера. Това осигурява по-добра използваемост на малки екрани, където плаващите прозорци биха закрили твърде голяма част от изображението.

Самите маркери остават видими и кликваеми на своите позиции, базирани на проценти. Потребителите все още могат да видят къде се намират всички дискусии и да докоснат маркери, за да отворят интерфейса за чат на цял екран.

### Динамично зареждане на изображения

Процентната система работи правилно дори когато изображенията се зареждат асинхронно или променят размера си след зареждането на страницата. Widget-ът наблюдава елемента изображение и преизчислява позициите на маркерите всеки път, когато размерите на изображението се променят.

Ако използвате lazy-loading на изображения или прилагате адаптивни изображения с различни размери при различни breakpoint-и, маркерите автоматично се нагласяват, когато размерът на изображението се промени.

### Консистентност между устройства

Понеже координатите се съхраняват като проценти в базата данни, дискусия, създадена на настолен компютър, се появява на точно същото относително място, когато бъде преглеждана на таблет или телефон. Потребителите могат да си сътрудничат между устройства без несъответствия в позиционирането.

Това работи в двете посоки. Дискусия, създадена чрез докосване на конкретно място на мобилно устройство, се появява на същото относително място при преглед на голям настолен монитор.

### Съображения за изгледа (viewport)

Widget-ът изчислява процентите спрямо самия елемент изображение, а не спрямо viewport-а. Това означава, че превъртането на страницата или промяната на размера на прозореца на браузъра не влияят на позициите на маркерите. Маркерите остават закрепени към местата си върху изображението независимо от промените в изгледа.

### Осигуряване на бъдеща съвместимост на съдържанието

Подходът, базиран на проценти, прави вашите дискусии върху изображения устойчиви на промени в оформлението, дизайна или екосистемата от устройства. С появата на нови размери екрани и устройства, съществуващите дискусии ще продължат да се показват правилно без необходимост от обновления или миграции.