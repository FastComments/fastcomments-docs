### Percentage-Based Positioning

Image Chat использует координаты, основанные на процентах, вместо пиксельных координат для позиционирования маркеров чата на изображениях. Когда пользователь кликает по изображению, виджет преобразует пиксельные координаты клика в проценты от ширины и высоты изображения. Такой подход гарантирует, что маркеры останутся в правильном положении независимо от того, как изображение отображается.

Например, если пользователь кликнул на 250 пикселей от левого края изображения шириной 1000px, виджет сохраняет это как 25% от левого края. Когда другой пользователь просматривает то же изображение шириной 500px на мобильном устройстве, маркер отображается на 125 пикселях от левого края, что по-прежнему составляет 25% от ширины.

### Benefits for Responsive Layouts

Эта процентная система позволяет Image Chat корректно работать на всех размерах устройств и ориентациях. Ваши изображения могут отображаться в различных размерах в зависимости от ширины экрана, правил CSS или ограничений контейнера, но маркеры всегда выравниваются правильно с предполагаемыми местами.

Пользователи на настольных компьютерах с большими мониторами видят маркеры в тех же относительных позициях, что и пользователи на смартфонах с маленькими экранами. Маркеры масштабируются пропорционально самому изображению.

### Image Scaling and Aspect Ratio

Пока ваше изображение сохраняет соотношение сторон при масштабировании (что является поведением браузера по умолчанию), маркеры, основанные на процентах, останутся идеально выровненными. Виджет предполагает, что изображения масштабируются пропорционально, и вычисляет позиции, исходя из этого предположения.

Если вы применяете CSS, который искажает соотношение сторон изображения (например, используя `object-fit: cover` с конкретными размерами), позиции маркеров могут не совпадать правильно. Для наилучших результатов позвольте изображениям масштабироваться естественным образом или используйте `object-fit: contain`, чтобы сохранить соотношение сторон.

### Chat Square Sizing

Визуальный размер маркеров чата также основан на процентах. Опция конфигурации `chatSquarePercentage` по умолчанию равна 5%, то есть каждый квадрат составляет 5% от ширины изображения. Это обеспечивает стабильную визуальную плотность на изображениях разных размеров.

На изображении шириной 1000px при стандартной настройке 5% маркеры имеют размер 50px на 50px. На изображении шириной 500px те же маркеры будут 25px на 25px. Они остаются пропорциональными размеру изображения.

### Mobile Behavior

На экранах шириной менее 768px Image Chat переключается на оптимизированную для мобильных устройств компоновку. Окна чата открываются во весь экран вместо плавающего рядом с маркером. Это обеспечивает лучшее удобство использования на маленьких экранах, где плавающие окна могли бы закрывать слишком большую часть изображения.

Сами маркеры остаются видимыми и кликабельными в своих позициях, заданных в процентах. Пользователи по-прежнему могут видеть, где расположены все обсуждения, и нажимать на маркеры, чтобы открыть полноэкранный интерфейс чата.

### Dynamic Image Loading

Процентная система корректно работает даже когда изображения загружаются асинхронно или меняют размер после загрузки страницы. Виджет отслеживает элемент изображения и пересчитывает позиции маркеров всякий раз, когда меняются размеры изображения.

Если вы используете ленивую загрузку изображений или реализуете адаптивные изображения с разными размерами на разных брейкпоинтах, маркеры автоматически подстраиваются при изменении размера изображения.

### Cross-Device Consistency

Поскольку координаты сохраняются в базе данных в виде процентов, обсуждение, созданное на настольном компьютере, отображается в точно том же относительном месте при просмотре на планшете или телефоне. Пользователи могут сотрудничать с разных устройств без несоответствий в позиционировании.

Это работает в обе стороны. Обсуждение, созданное путем нажатия на конкретное место на мобильном устройстве, появляется в той же относительной позиции при просмотре на большом настольном мониторе.

### Viewport Considerations

Виджет вычисляет проценты относительно самого элемента изображения, а не вьюпорта. Это означает, что прокрутка страницы или изменение размера окна браузера не влияют на позиции маркеров. Маркеры остаются привязанными к своим местам на изображении независимо от изменений в вьюпорте.

### Future-Proofing Content

Процентный подход делает ваши обсуждения изображений устойчивыми к изменениям в макете, дизайне или экосистеме устройств. По мере появления новых размеров экранов и устройств существующие обсуждения продолжат отображаться корректно без необходимости обновлений или миграций.