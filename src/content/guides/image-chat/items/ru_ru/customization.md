### Поддержка тёмного режима

Image Chat включает встроенную поддержку тёмного режима. Когда вы устанавливаете `hasDarkBackground: true` в вашей конфигурации, окна чата и элементы интерфейса автоматически подстраиваются под тёмный фон.

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    hasDarkBackground: true
});
```

Стилизация для тёмного режима применяется к окнам чата, квадратам-маркерам и всем интерактивным элементам. Если на вашем сайте есть переключатель тёмного режима, вы можете инициализировать виджет заново при смене режима или использовать подход с классом body, описанный ниже.

### Динамический тёмный режим

Если тёмный режим на вашем сайте управляется добавлением класса `.dark` к элементу body, интерфейс Image Chat автоматически учтёт это без необходимости повторной инициализации. Стили виджета разработаны так, чтобы реагировать на наличие этого класса.

```css
/* Ваш CSS для тёмного режима */
body.dark {
    background: #1a1a1a;
    color: #ffffff;
}
```

### Пользовательская стилизация с помощью CSS

Вы можете настроить внешний вид маркеров, окон чата и других элементов с помощью CSS. Виджет добавляет определённые классы, которые вы можете таргетировать в своём файле стилей.

Квадраты и окна чата используют систему стилизации всплывающих комментариев FastComments, поэтому любые кастомизации, которые вы применили к стандартному виджету комментариев, также повлияют на Image Chat.

### Размер маркеров чата

Опция `chatSquarePercentage` контролирует размер кликабельных маркеров. По умолчанию это 5% от ширины изображения:

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    chatSquarePercentage: 7  // Больше, более заметные квадраты
});
```

Меньшие значения создают более тонкие маркеры, которые сливаются с изображением. Большие значения делают маркеры более заметными и лёгкими для нажатия, особенно на мобильных устройствах или для целей доступности.

### Поведение на мобильных устройствах

На экранах шириной менее 768px Image Chat автоматически переключается на оптимизированную для мобильных устройств компоновку. Окна чата отображаются во всю ширину экрана вместо того, чтобы плавать рядом с маркерами, что улучшает удобство использования на маленьких экранах.

Маркеры остаются видимыми в своих адаптивных позициях на изображении. Пользователи могут нажать любой маркер, чтобы открыть полноэкранный интерфейс чата. Это поведение встроено и не требует дополнительной настройки.

### Внешний вид окна чата

Окна чата имеют ширину 300px на десктопе с указательной стрелкой 16px, указывающей на маркер. Окна автоматически позиционируются в зависимости от доступного пространства в области просмотра, используя классы позиционирования, такие как `to-right`, `to-left`, `to-top` и `to-bottom`.

Вы можете добавить собственный CSS, чтобы изменить цвета, шрифты, отступы или другие визуальные свойства этих окон. Окна чата используют ту же структуру компонентов, что и стандартный виджет FastComments, поэтому они наследуют любые глобальные настройки, которые вы применили.

### Отложенная инициализация

Окна чата инициализируются при наведении для десктоп-пользователей или сразу при создании. Это снижает начальную нагрузку, рендеря интерфейс чата только тогда, когда пользователи действительно взаимодействуют с маркером.

Отложенная инициализация происходит прозрачно. Пользователи не замечают задержки, но браузеру не нужно рендерить десятки скрытых окон чата, если на изображении много маркеров.

### Локализация

Image Chat поддерживает те же параметры локализации, что и стандартный виджет FastComments. Установите опцию `locale`, чтобы отображать текст интерфейса на разных языках:

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    locale: 'fr'  // Французский
});
```

FastComments поддерживает десятки языков. Настройка locale влияет на весь текст интерфейса, включая подсказки, кнопки и текст заполнителей.

### Унаследованные параметры настройки

Поскольку Image Chat расширяет стандартный виджет комментариев, он наследует все параметры настройки базового виджета. Это включает пользовательские CSS-классы, собственные переводы, настройку аватаров, форматирование дат и многое другое.

Смотрите основную документацию по настройке FastComments для полного списка доступных параметров настройки.

### Работа с пользовательскими шрифтами

Если на вашем сайте используются пользовательские шрифты, интерфейс Image Chat унаследует эти шрифты из CSS вашей страницы. Окна чата рендерятся внутри DOM вашей страницы и учитывают существующие настройки типографики.

Для лучшего результата убедитесь, что ваши пользовательские шрифты загружены до инициализации Image Chat, или будьте готовы к кратковременному появлению нестилизованного текста, пока шрифты загружаются.

### Визуальный дизайн маркеров

Квадратные маркеры имеют сдержанный визуальный дизайн, который делает их заметными, но не загромождает изображение. Вы можете настроить их внешний вид через CSS, если хотите другой визуальный стиль.

Маркеры включают состояния при наведении, которые дают обратную связь, когда пользователь перемещает по ним мышь. На сенсорных устройствах взаимодействие по тапу даёт мгновенную обратную связь, открывая окно чата.

---