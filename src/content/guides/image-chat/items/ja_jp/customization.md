### ダークモードのサポート

Image Chat には組み込みのダークモードサポートがあります。設定で `hasDarkBackground: true` を指定すると、チャットウィンドウや UI 要素が自動的にダーク背景に適した表示に調整されます。

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    hasDarkBackground: true
});
```

ダークモードのスタイリングはチャットウィンドウ、マーカーの四角、そしてすべてのインタラクティブ要素に適用されます。サイトにダークモードのトグルがある場合、モード変更時にウィジェットを再初期化するか、以下に説明する body クラス方式を使用できます。

### ダイナミックダークモード

サイトのダークモードが body 要素に `.dark` クラスを追加することで制御されている場合、Image Chat の UI は再初期化を必要とせず自動的にこれを反映します。ウィジェットのスタイルはこのクラスの有無に応じて反応するよう設計されています。

```css
/* ダークモード用の CSS */
body.dark {
    background: #1a1a1a;
    color: #ffffff;
}
```

### CSS によるカスタムスタイリング

マーカー、チャットウィンドウ、その他の要素の外観は CSS でカスタマイズできます。ウィジェットは特定のクラスを追加するため、スタイルシートでそれらをターゲットにできます。

チャットの四角とウィンドウは FastComments のコメントバブルのスタイリングシステムを使用しているため、標準のコメントウィジェットに適用したカスタマイズは Image Chat にも反映されます。

### チャットスクエアのサイズ調整

`chatSquarePercentage` オプションはクリック可能なマーカーのサイズを制御します。デフォルトは画像幅の 5% です：

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    chatSquarePercentage: 7  // 大きめで視認性の高いスクエア
});
```

値を小さくすると画像に馴染む控えめなマーカーになります。値を大きくすると、特にモバイルデバイスやアクセシビリティの観点でマーカーが目立ち、クリックしやすくなります。

### モバイルでの挙動

幅が 768px 未満の画面では、Image Chat は自動的にモバイル最適化レイアウトに切り替わります。チャットウィンドウはマーカー横に浮かぶ代わりにフルスクリーンで表示され、小さい画面での使いやすさが向上します。

マーカーは画像上のレスポンシブな位置に表示されたままです。ユーザーは任意のマーカーをタップしてフルスクリーンのチャットインターフェースを開けます。この挙動は組み込み済みで、設定は不要です。

### チャットウィンドウの外観

チャットウィンドウはデスクトップでは幅 300px、マーカーを指す 16px の矢印があります。ウィンドウは利用可能なビューポート空間に基づいて自動的に位置を決め、`to-right`、`to-left`、`to-top`、`to-bottom` のような配置クラスを使用します。

色、フォント、間隔、その他の視覚プロパティを調整するためにカスタム CSS を追加できます。チャットウィンドウは標準の FastComments ウィジェットと同じコンポーネント構造を使用しているため、適用したグローバルなカスタマイズを継承します。

### 遅延初期化

チャットウィンドウはデスクトップユーザーではホバー時に、または作成時に即座に初期化されます。これにより、ユーザーが実際にマーカーと対話するまでチャットインターフェースのレンダリングを行わないため、初期の読み込み負荷が軽減されます。

遅延初期化は透過的に行われます。ユーザーは遅延を感じませんが、画像上に多数のマーカーがある場合でもブラウザが隠れたチャットウィンドウを何十個もレンダリングする必要はありません。

### ローカリゼーション

Image Chat は標準の FastComments ウィジェットと同じローカリゼーションオプションをすべてサポートします。`locale` オプションを設定して UI テキストを別の言語で表示できます：

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    locale: 'fr'  // フランス語
});
```

FastComments は数十の言語をサポートしています。ロケール設定はプロンプト、ボタン、プレースホルダーテキストを含むすべての UI テキストに影響します。

### 継承されるカスタマイズオプション

Image Chat は標準のコメントウィジェットを拡張しているため、ベースウィジェットからすべてのカスタマイズオプションを継承します。これにはカスタム CSS クラス、カスタム翻訳、アバターのカスタマイズ、日付フォーマットなどが含まれます。

利用可能なすべてのカスタマイズオプションの完全な一覧は、FastComments のメインのカスタマイズドキュメントを参照してください。

### カスタムフォントの利用

サイトでカスタムフォントを使用している場合、Image Chat の UI はページの CSS からそれらのフォントを継承します。チャットウィンドウはページの DOM 内にレンダリングされ、既存のタイポグラフィ設定を尊重します。

最良の結果を得るには、Image Chat を初期化する前にカスタムフォントがロードされていることを確認するか、フォント読み込み中にスタイルのないテキストが一時的に表示されることを許容してください。

### マーカーのビジュアルデザイン

四角いマーカーは目立ちすぎない控えめなビジュアルデザインになっています。異なる見た目にしたい場合は CSS で外観をカスタマイズできます。

マーカーにはホバーステートがあり、ユーザーがマウスを乗せた際にフィードバックを提供します。タッチデバイスでは、タップ操作がチャットウィンドウを開くことで即時のフィードバックを提供します。

---