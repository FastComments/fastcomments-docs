### Поддержка тёмной темы

Image Chat включает встроенную поддержку тёмной темы. Если вы установите `hasDarkBackground: true` в вашей конфигурации, окна чата и элементы интерфейса автоматически адаптируются для корректного отображения на тёмном фоне.

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    hasDarkBackground: true
});
```

Стили тёмной темы применяются к окнам чата, маркерам-квадратам и всем интерактивным элементам. Если на вашем сайте есть переключатель тёмной темы, вы можете переинициализировать виджет при смене режима или использовать подход с классом body, описанный ниже.

### Динамическая тёмная тема

Если тёмная тема на вашем сайте управляется добавлением класса `.dark` к элементу body, UI Image Chat автоматически учтёт это без необходимости переинициализации. Стили виджета разработаны так, чтобы реагировать на наличие этого класса.

```css
/* Your dark mode CSS */
body.dark {
    background: #1a1a1a;
    color: #ffffff;
}
```

### Пользовательская стилизация через CSS

Вы можете настроить внешний вид маркеров, окон чата и других элементов с помощью CSS. Виджет добавляет специальные классы, на которые вы можете ориентироваться в своей таблице стилей.

Квадраты чата и окна используют систему стилизации пузырьков комментариев FastComments, поэтому любые кастомизации, применённые к стандартному виджету комментирования, также повлияют на Image Chat.

### Размер квадрата чата

Опция `chatSquarePercentage` управляет размером кликабельных маркеров. По умолчанию это 5% от ширины изображения:

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    chatSquarePercentage: 7  // Крупнее, более заметные квадраты
});
```

Меньшие значения создают более сдержанные маркеры, которые сливаются с изображением. Большее значение делает маркеры более заметными и удобными для нажатия, особенно на мобильных устройствах или в целях доступности.

### Поведение на мобильных устройствах

На экранах шириной менее 768px Image Chat автоматически переключается на макет, оптимизированный для мобильных устройств. Окна чата открываются в полноэкранном режиме, а не плавают рядом с маркерами, обеспечивая лучшую удобопользуемость на маленьких экранах.

Маркеры остаются видимыми в своих адаптивных позициях на изображении. Пользователи могут нажать любой маркер, чтобы открыть полноэкранный интерфейс чата. Это поведение встроено и не требует настройки.

### Внешний вид окна чата

Окна чата имеют ширину 300px на десктопе с указателем-стрелкой 16px, указывающей на маркер. Окна позиционируются автоматически в зависимости от доступного пространства в области просмотра, используя классы позиционирования, такие как `to-right`, `to-left`, `to-top` и `to-bottom`.

Вы можете добавить собственный CSS, чтобы настроить цвета, шрифты, отступы или другие визуальные свойства этих окон. Окна чата используют ту же структуру компонентов, что и стандартный виджет FastComments, поэтому они наследуют любые глобальные кастомизации, которые вы применили.

### Ленивная инициализация

Окна чата инициализируются при наведении для пользователей на десктопе или сразу при создании. Это снижает начальную нагрузку, рендеря интерфейс чата только когда пользователи действительно взаимодействуют с маркером.

Ленивая инициализация происходит прозрачно. Пользователи не заметят задержки, но браузеру не нужно рендерить десятки скрытых окон чата, если на изображении много маркеров.

### Локализация

Image Chat поддерживает те же параметры локализации, что и стандартный виджет FastComments. Установите опцию `locale`, чтобы отображать текст интерфейса на разных языках:

```javascript
FastCommentsImageChat(imageElement, {
    tenantId: 'demo',
    locale: 'fr'  // Французский
});
```

FastComments поддерживает десятки языков. Параметр locale влияет на весь текст интерфейса, включая подсказки, кнопки и текст-заполнитель.

### Унаследованные опции кастомизации

Поскольку Image Chat расширяет стандартный виджет комментирования, он наследует все опции кастомизации базового виджета. Это включает пользовательские CSS-классы, собственные переводы, настройку аватаров, форматирование даты и многое другое.

См. основную документацию по кастомизации FastComments для полного списка доступных опций кастомизации.

### Работа с пользовательскими шрифтами

Если на вашем сайте используются пользовательские шрифты, UI Image Chat унаследует эти шрифты из CSS вашей страницы. Окна чата рендерятся внутри DOM вашей страницы и уважительно используют существующие настройки типографики.

Для лучшего результата убедитесь, что пользовательские шрифты загружены до инициализации Image Chat, или примите возможность краткого мигания нестилизованного текста, пока шрифты подгружаются.

### Визуальный дизайн маркеров

Квадратные маркеры имеют тонкий визуальный дизайн, который делает их заметными, не перегружая изображение. При желании вы можете настроить их внешний вид через CSS для другого визуального оформления.

Маркеры включают состояния при наведении, которые дают обратную связь при перемещении мыши по ним. На сенсорных устройствах взаимодействие по нажатию предоставляет мгновенную обратную связь, открывая окно чата.

---