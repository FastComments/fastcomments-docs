### Πώς Λειτουργεί η Επιλογή Κειμένου

Όταν οι χρήστες επιλέγουν κείμενο μέσα στο περιέκτη Collab Chat, το widget καταγράφει αυτήν την επιλογή και τους επιτρέπει να ξεκινήσουν μια συζήτηση. Η επιλογή μπορεί να είναι τόσο μικρή όσο μια μεμονωμένη λέξη ή τόσο μεγάλη όσο πολλαπλές παραγράφους που διασχίζουν διαφορετικά στοιχεία.

### Καθυστέρηση Επιλογής

Σε επιτραπέζιες συσκευές, υπάρχει καθυστέρηση 3,5 δευτερολέπτων μεταξύ της επιλογής κειμένου από τον χρήστη και της εμφάνισης της προτροπής για συζήτηση. Αυτό αποτρέπει το αναβόσβημα της UI όταν οι χρήστες απλώς επισημαίνουν κείμενο για αντιγραφή ή ανάγνωση. Σε κινητές συσκευές, η προτροπή εμφανίζεται αμέσως καθώς η επιλογή κειμένου είναι πιο σκόπιμη σε οθόνες αφής.

### Μοναδικά Αναγνωριστικά Συζητήσεων

Κάθε συζήτηση παίρνει ένα μοναδικό `urlId` που συνδυάζει το URL της σελίδας, τη διαδρομή του στοιχείου DOM και το σειριαποιημένο εύρος κειμένου. Αυτό εξασφαλίζει ότι κάθε επιλογή κειμένου δημιουργεί μια ξεχωριστή συζήτηση που μπορεί να βρεθεί ξανά αργότερα.

Εάν παρέχετε ένα προσαρμοσμένο `urlId` στη ρύθμισή σας, θα συνδυαστεί με τη διαδρομή του στοιχείου και το εύρος κειμένου για να δημιουργήσει το τελικό αναγνωριστικό.

### Οπτικές Επισημάνσεις

Όταν υπάρχει συζήτηση για μια συγκεκριμένη επιλογή κειμένου, το κείμενο αυτό λαμβάνει οπτική επισήμανση. Η επισήμανση υλοποιείται χρησιμοποιώντας χρώματα φόντου και εμφανίζεται κατά το hover ή όταν το σχετικό παράθυρο συνομιλίας είναι ανοικτό.

Το σύστημα επισήμανσης λειτουργεί τυλίγοντας το επιλεγμένο κείμενο σε ένα ειδικό στοιχείο που μπορεί να έχει στυλ. Αυτή η προσέγγιση εξασφαλίζει ότι οι επισήμανσεις παραμένουν ακριβείς ακόμα και όταν η υποκείμενη δομή HTML είναι πολύπλοκη.

### Θέση Παραθύρου Συζήτησης

Όταν ένας χρήστης κλικάρει πάνω σε μια επισήμανση ή δημιουργεί μια νέα επισήμανση, ένα παράθυρο συζήτησης εμφανίζεται κοντά στο επιλεγμένο κείμενο. Το widget υπολογίζει αυτόματα την καλύτερη θέση για αυτό το παράθυρο με βάση τον διαθέσιμο χώρο του viewport.

Το σύστημα τοποθέτησης χρησιμοποιεί κλάσεις CSS όπως `to-right`, `to-left`, `to-top`, και `to-bottom` για να υποδείξει προς ποια κατεύθυνση πρέπει να επεκτείνεται το παράθυρο συζήτησης από την επισήμανση. Σε κινητές συσκευές (οθόνες μικρότερες των 768px πλάτους), το παράθυρο συζήτησης εμφανίζεται πάντα σε πλήρη οθόνη για καλύτερη χρηστικότητα.

### Διαστάσεις Παραθύρου Συζήτησης

Τα παράθυρα συζήτησης έχουν πλάτος 410px σε επιτραπέζιες συσκευές με διάκενο 20px και ένα οπτικό βέλος 16px που δείχνει προς το επισημασμένο κείμενο. Αυτές οι διαστάσεις είναι σταθερές για να εξασφαλιστεί συνεπής συμπεριφορά, αλλά μπορείτε να προσαρμόσετε την εμφάνιση με CSS.

### Επιλογές Που Διασχίζουν Στοιχεία

Οι χρήστες μπορούν να επιλέξουν κείμενο που εκτείνεται σε πολλαπλά στοιχεία HTML, όπως επισημαίνοντας από το μέσο μιας παραγράφου έως την αρχή μιας άλλης. Το σύστημα σειριοποίησης εύρους χειρίζεται αυτό σωστά και θα επισημάνει όλο το επιλεγμένο κείμενο ακόμη και πέρα από τα όρια των στοιχείων.

### Συμβατότητα Περιηγητή

Το σύστημα επιλογής κειμένου χρησιμοποιεί το πρότυπο `window.getSelection()` API το οποίο υποστηρίζεται σε όλους τους σύγχρονους περιηγητές. Για παλαιότερες εκδόσεις του Internet Explorer, υπάρχει fallback στο `document.selection` για συμβατότητα.

### Διατήρηση Επιλογής

Μόλις δημιουργηθεί μια συζήτηση για μια επιλογή κειμένου, αυτή η επισήμανση παραμένει ακόμη και αν η σελίδα φορτωθεί ξανά. Το σειριαποιημένο εύρος και η διαδρομή DOM επιτρέπουν στο widget να επαναφέρει τις επισήμανσεις στην ακριβώς ίδια θέση όταν οι χρήστες επιστρέψουν στη σελίδα.

Αυτό λειτουργεί αξιόπιστα εφόσον το περιεχόμενο της σελίδας παραμένει σταθερό. Εάν αλλάξετε το κείμενο ή αναδιαρθρώσετε το HTML σας, υπάρχουσες επισήμανσεις μπορεί να μην ευθυγραμμίζονται πλέον σωστά με το κείμενο. Για αυτόν τον λόγο, είναι καλύτερο να αποφύγετε σημαντικές αλλαγές περιεχομένου σε σελίδες με ενεργές επισημάνσεις, ή να εξετάσετε τη μετανάστευση των επισημάνσεων όταν οι αλλαγές περιεχομένου είναι απαραίτητες.