### Како ради одабир текста

Када корисници одаберу текст унутар Collab Chat контејнера, видџет бележи тај одабир и омогућава им да започну дискусију. Одабир може бити толико мали као једна реч или толико обиман као више пасуса који обухватају различите елементе.

### Задршка при одабиру

На десктоп уређајима, постоји задршка од 3.5 секунде између тренутка када корисник одабере текст и тренутка када се појави порука за дискусију. Ово спречава треперење корисничког интерфејса када корисници само означавају текст да би га копирали или прочитали. На мобилним уређајима, порука се појављује одмах јер је одабир текста на екранима осетљивим на додир намернији.

### Јединствени идентификатори конверзација

Свака конверзација добија јединствени `urlId` који комбинује URL странице, путању до DOM елемента и серијализовани опсег текста. Ово обезбеђује да сваки одабир текста креира посебну конверзацију која се може касније поново пронаћи.

Ако у својој конфигурацији обезбедите прилагођени `urlId`, он ће бити комбинован са путањом елемента и опсегом текста да би се креирао финални идентификатор.

### Визуелно означавање

Када постоји дискусија за одређени одабир текста, тај текст добија визуелно означавање. Означавање се реализује помоћу боје позадине и појављује се при преласку курсора или када је повезани прозор четa отворен.

Систем означавања ради тако што обмотава одабрани текст у посебан елемент који се може стиловати. Оваквим приступом се обезбеђује да означавања остану тачна чак и када је основна HTML структура сложена.

### Позиционирање прозора ћаскања

Када корисник кликне на означавање или креира нову анотацију, прозор ћаскања се појављује у близини одабраног текста. Видџет аутоматски израчунава најбољу позицију за овај прозор на основу расположивог простора у приказу.

Систем позиционирања користи CSS класе попут `to-right`, `to-left`, `to-top` и `to-bottom` да означи у ком правцу прозор ћаскања треба да се прошири у односу на означени текст. На мобилним уређајима (екрани ширине испод 768px), прозор ћаскања се увек појављује преко целог екрана ради боље употребљивости.

### Димензије прозора ћаскања

Прозори ћаскања су ширине 410px на десктопу са размаком од 20px и визуелном стрелицом од 16px која показује ка означеном тексту. Ове димензије су фиксне како би се обезбедило понашање које је уједначено, али можете прилагодити изглед помоћу CSS-а.

### Одабири који обухватају више елемената

Корисници могу да одаберу текст који пролази преко више HTML елемената, као што је означавање од средине једног пасуса до почетка другог. Систем серијализације опсега ово правилно обрађује и означиће сав одабрани текст чак и преко граница елемената.

### Компатибилност са прегледачима

Систем за одабир текста користи стандардни `window.getSelection()` API који је подржан у свим модерним прегледачима. За старије верзије Internet Explorer-а, користи се `document.selection` као резерва за компатибилност.

### Стабилност означавања

Када се за одабир текста креира конверзација, та анотација остаје и након учитавања странице. Серијализовани опсег и DOM пут омогућавају видџету да врати означавања на тачно исто место када корисници поново посете страницу.

Ово поуздано функционише све док садржај ваше странице остаје стабилан. Ако промените текстуални садржај или реструктуришете свој HTML, постојеће анотације можда више неће тачно одговарати тексту. Због тога је најбоље избегавати велике промене садржаја на страницама са активним анотацијама или размотрити миграцију анотација када су промене садржаја неопходне.