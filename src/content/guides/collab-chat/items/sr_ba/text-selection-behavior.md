### Како функционише одабир текста

Када корисници одаберу текст унутар Collab Chat контејнера, видгет ухвати ту селекцију и омогућава им да започну дискусију. Селекција може бити толико мала као једна реч или толико велика колико више параграфа који се простиру преко различитих елемената.

### Задршка селекције

На десктоп уређајима постоји задршка од 3.5 секунде између тренутка када корисник одабере текст и када се појави позив за дискусију. Ово спречава треперење корисничког интерфејса када корисници једноставно истичу текст да би га копирали или прочитали. На мобилним уређајима позив се појављује одмах јер је одабир текста на уређајима на додир обично намернији.

### Јединствени ID-ови разговора

Сваки разговор добије јединствени `urlId` који комбинује URL странице, путању DOM елемента и серијализовани опсег текста. Ово осигурава да свака селекција текста креира посебан разговор који се може поново пронаћи касније.

Ако у вашој конфигурацији наведете прилагођени `urlId`, он ће се комбиновати са путањом елемента и опсегом текста како би се креирао финални идентификатор.

### Визуелна истакања

Када постоји дискусија за одређену селекцију текста, тај текст добија визуелно истакање. Истакање се реализује коришћењем боја позадине и појављује се при прелазу мишем или када је повезани прозор ћаскања отворен.

Систем за истицање ради тако што умотава одабрани текст у посебан елемент који се може стиловати. Овај приступ осигурава да истакања остану прецизна чак и када је основна HTML структура сложена.

### Позиционирање прозора ћаскања

Када корисник кликне на истакнути део или креира нову анотацију, прозор ћаскања се појављује у близини одабраног текста. Видгет аутоматски израчунава најбољу позицију за овај прозор на основу расположивог простора у viewport-у.

Систем позиционирања користи CSS класе попут `to-right`, `to-left`, `to-top` и `to-bottom` да означи у ком правцу би прозор ћаскања требао да се прошири од истакнутог текста. На мобилним уређајима (екрани ширине мање од 768px), прозор ћаскања се увек појављује преко целог екрана ради боље употребљивости.

### Димензије прозора ћаскања

Прозори ћаскања на десктопу имају ширину 410px са размаком од 20px и визуелном стрелицом од 16px која показује на истакнути текст. Ове димензије су фиксне како би се обезбедило конзистентно понашање, али можете прилагодити изглед помоћу CSS-а.

### Селекције кроз више елемената

Корисници могу одабрати текст који се протеже кроз више HTML елемената, на пример истичући од средине једног параграфа до почетка другог. Систем серијализације опсега правилно то обрађује и истакнуће сав изабрани текст чак и преко граница елемената.

### Компатибилност прегледача

Систем за одабир текста користи стандардни `window.getSelection()` API који је подржан у свим модерним прегледачима. За старије верзије Internet Explorer-а, прелази се на `document.selection` ради компатибилности.

### Постојаност селекције

Када се за селекцију текста креира разговор, та анотација остаје чак и ако се страница освежи. Серијализовани опсег и путања DOM-а омогућавају видгету да врати истакања на тачно исто место када се корисници врате на страницу.

Ово ради поуздано све док садржај ваше странице остане стабилан. Ако промените текстуални садржај или реструктуришете HTML, постојеће анотације можда више неће бити правилно усклађене са текстом. Због тога је најбоље избегавати велике измене садржаја на страницама са активним анотацијама, или размотрити миграцију анотација када су измене садржаја неопходне.