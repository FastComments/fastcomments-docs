FastComments автоматически отслеживает подробные события для каждого комментария, чтобы обеспечить прозрачность в решениях модерации и действиях системы. Эти журналы помогают понять, почему комментарий был одобрен, отмечен как спам или у него был изменён статус.

## Accessing Comment Logs

Чтобы просмотреть журналы для конкретного комментария:

1. Перейдите на страницу **Moderate Comments** в вашей панели FastComments
2. Найдите комментарий, который хотите проверить
3. Нажмите кнопку **View Logs** (значок часов) в панели действий комментария
4. Появится диалоговое окно, показывающее полную историю событий для этого комментария

Каждая запись в журнале показывает:
- **When** - Временная метка события
- **Who** - Пользователь или система, вызвавшие событие (если применимо)
- **What** - Тип действия или события
- **Details** - Дополнительный контекст, например значения до/после, имена движков или связанные данные

## Comment Log Events

Каждый комментарий ведёт журнал событий, которые происходят в ходе его жизненного цикла. Ниже перечислены типы отслеживаемых событий:

### Anonymization Events
- **Anonymized** - Содержимое комментария было очищено, и пользователь помечен как удалённый
- **RestoredFromAnonymized** - Комментарий был восстановлен из анонимизированного состояния

### Approval Events
- **ApprovedDueToPastComment** - Комментарий одобрен, потому что у пользователя ранее были одобренные комментарии (включает ссылку на прошлый комментарий)
- **ApprovedIsAdmin** - Комментарий одобрен, потому что пользователь является администратором
- **NotApprovedRequiresApproval** - Комментарию требуется ручное одобрение
- **NotApprovedLowTrustFactor** - Комментарий не одобрен из-за низкого коэффициента доверия пользователя (включает значение коэффициента доверия)

### Profile Comment Approval Events

Эти события применяются специально к комментариям в профилях пользователей:

- **ApprovedProfileAutoApproveAll** - Комментарий в профиле автоматически одобрен, потому что владелец профиля включил автo-одобрение для всех комментариев
- **ApprovedProfileTrusted** - Комментарий в профиле одобрен, потому что комментатор доверенный (включает ссылку на комментарий, который установил доверие)
- **NotApprovedProfileManualApproveAll** - Комментарию в профиле требуется ручное одобрение, потому что владелец профиля включил ручное одобрение
- **NotApprovedProfileNotTrusted** - Комментарий в профиле не одобрен, потому что комментатор не является доверенным
- **NotApprovedProfileNewUser** - Комментарий в профиле не одобрен, потому что комментатор — новый пользователь

### Spam Detection Events
- **IsSpam** - Комментарий помечен как спам движком обнаружения (включает информацию о том, какой движок принял решение)
- **IsSpamDueToBadWords** - Комментарий помечен как спам из-за фильтра нецензурной лексики
- **IsSpamFromLLM** - Комментарий помечен как спам движком ИИ/LLM (включает имя движка, ответ и количество токенов)
- **IsSpamRepeatComment** - Комментарий помечен как спам за повторяемость (включает, какой движок это обнаружил)
- **NotSpamIsOnlyImage** - Комментарий не помечен как спам, потому что содержит только изображения
- **NotSpamIsOnlyReacts** - Комментарий не помечен как спам, потому что содержит только реакции
- **NotSpamNoLinkOrMention** - Комментарий не помечен как спам из-за отсутствия подозрительных ссылок или упоминаний
- **NotSpamPerfectTrustFactor** - Комментарий не помечен как спам из-за высокого коэффициента доверия пользователя
- **NotSpamTooShort** - Комментарий не помечен как спам, потому что он слишком короткий для анализа
- **NotSpamSkipped** - Проверка на спам была пропущена
- **NotSpamFromEngine** - Комментарий определён как не спам движком обнаружения (включает имя движка и коэффициент доверия)

### Bad Words/Profanity Events
- **BadWordsCheckFailed** - Проверка фильтра нецензурной лексики завершилась с ошибкой
- **BadWordsFoundBadPhrase** - Фильтр нецензурной лексики обнаружил неприемлемую фразу (включает фразу)
- **BadWordsFoundBadWord** - Фильтр нецензурной лексики обнаружил неприемлемое слово (включает слово)
- **BadWordsNoDefinitionForLocale** - Нет определений нецензурной лексики для языка комментария (включает локаль)

### User Verification Events
- **CommentMustBeVerifiedToApproveNotInVerifiedSession** - Для одобрения комментария требуется верификация, но пользователь не верифицирован в текущей сессии
- **CommentMustBeVerifiedToApproveNotVerifiedYet** - Для одобрения комментария требуется верификация, но пользователь ещё не верифицирован
- **InVerifiedSession** - Пользователь, публикующий комментарий, находится в верифицированной сессии
- **SentVerificationEmailNoSession** - Письмо для верификации отправлено непроверенному пользователю
- **SentWelcomeEmail** - Приветственное письмо отправлено новому пользователю

### Trust and Security Events
- **TrustFactorChanged** - Коэффициент доверия пользователя был изменён (включает значения до и после)
- **SpamFilterDisabledBecauseAdmin** - Фильтрация спама была отключена для пользователя-администратора
- **TenantSpamFilterDisabled** - Фильтрация спама отключена для всего тенанта
- **RepeatCommentCheckIgnored** - Проверка на повторяющиеся комментарии была обойдена (включает причину)
- **UserIsAdmin** - Пользователь идентифицирован как администратор
- **UserIsAdminParentTenant** - Пользователь идентифицирован как администратор родительского тенанта
- **UserIsAdminViaSSO** - Пользователь идентифицирован как администратор через SSO
- **UserIsMod** - Пользователь идентифицирован как модератор

### Comment Status Changes

События изменения статуса включают значения до и после, а также пользователя, который внес изменение:

- **ExpireStatusChanged** - Статус истечения комментария был изменён
- **ReviewStatusChanged** - Статус проверки комментария был изменён
- **SpamStatusChanged** - Статус спама комментария был обновлён
- **ApproveStatusChanged** - Статус одобрения комментария был изменён
- **TextChanged** - Текст комментария был отредактирован (включает текст до и после)
- **VotesChanged** - Количество голосов за комментарий было обновлено (включает подробную разбивку голосов)
- **Flagged** - Комментарий был отмечен пользователями
- **UnFlagged** - Метки флагов у комментария были удалены

### Moderation Actions
- **Pinned** - Комментарий был прикреплён модератором (включает, кто его прикрепил)
- **UnPinned** - Комментарий был откреплён модератором (включает, кто его открепил)

### Notification Events
- **CreatedNotifications** - Для комментария были созданы уведомления (включает количество уведомлений)
- **NotificationCreateFailure** - Не удалось создать уведомления
- **BadgeAwarded** - Пользователю была присуждена значок за комментарий (включает имя значка)

### Publishing Events
- **PublishedLive** - Комментарий был опубликован для живых подписчиков (включает количество подписчиков)

### Integration Events
- **WebhookSynced** - Комментарий синхронизирован через webhook

### Spam Rule Events
- **SpamRuleMatch** - Комментарий совпал с кастомным правилом по спаму (включает детали правила)

### Localization Events
- **LocaleDetectedFromText** - Язык был автоматически определён по тексту комментария (включает определённый язык и локаль)

## Use Cases for Comment Logs

Журналы комментариев автоматически создаются и сохраняются вместе с каждым комментарием. Они предоставляют ценные сведения для:

- **Understanding moderation decisions** - Увидеть точно, почему комментарий был одобрен, отправлен на проверку или помечен как спам
- **Debugging approval/spam issues** - Проследить логику принятия решений, когда комментарии ведут себя не так, как ожидалось
- **Tracking user behavior patterns** - Отслеживать изменения коэффициента доверия и статус верификации
- **Auditing moderator actions** - Просмотреть, какие действия модераторы совершали в отношении конкретных комментариев
- **Investigating spam filter effectiveness** - Увидеть, какие движки обнаружения ловят спам, а какие — нет
- **Troubleshooting integrations** - Проверить синхронизацию webhook и доставку уведомлений

Эти журналы помогают сохранять прозрачность в процессе модерации и способствуют тонкой настройке поведения вашей системы комментариев.