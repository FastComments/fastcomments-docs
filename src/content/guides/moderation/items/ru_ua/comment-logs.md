FastComments автоматически отслеживает подробные события для каждого комментария, чтобы обеспечить прозрачность решений модерации и действий системы. Эти журналы помогают понять, почему комментарий был одобрен, помечен как спам или у него был изменён статус.

## Доступ к журналам комментариев

Чтобы просмотреть журналы для конкретного комментария:

1. Перейдите на страницу **Модерация комментариев** в панели управления FastComments
2. Найдите комментарий, который хотите проверить
3. Нажмите кнопку **Просмотреть журналы** (значок часов) в панели действий комментария
4. Появится диалоговое окно, показывающее полную историю событий для этого комментария

Каждая запись журнала отображает:
- **Когда** - метка времени события
- **Кто** - пользователь или система, вызвавшие событие (если применимо)
- **Что** - тип действия или событие
- **Детали** - дополнительный контекст, такой как значения до/после, названия движков или связанные данные

## События журнала комментариев

Каждый комментарий ведёт журнал событий, которые происходят в течение его жизненного цикла. Ниже перечислены типы событий, которые отслеживаются:

### События анонимизации
- **Anonymized** - содержимое комментария было очищено, а пользователь отмечен как удалённый
- **RestoredFromAnonymized** - комментарий был восстановлен из анонимизированного состояния

### События одобрения
- **ApprovedDueToPastComment** - комментарий одобрен потому, что у пользователя были ранее одобренные комментарии (включает ссылку на прошлый комментарий)
- **ApprovedIsAdmin** - комментарий одобрен потому, что пользователь является администратором
- **NotApprovedRequiresApproval** - комментарий требует ручного одобрения
- **NotApprovedLowTrustFactor** - комментарий не одобрен из-за низкого доверительного фактора пользователя (включает значение доверительного фактора)

### События одобрения комментариев в профиле

Эти события применяются специально к комментариям в профилях пользователей:

- **ApprovedProfileAutoApproveAll** - комментарий в профиле автоматически одобрен, потому что владелец профиля включил авто-одобрение всех комментариев
- **ApprovedProfileTrusted** - комментарий в профиле одобрен, потому что комментатор является доверенным (включает ссылку на комментарий, который установил доверие)
- **NotApprovedProfileManualApproveAll** - комментарий в профиле требует ручного одобрения, потому что владелец профиля включил ручное одобрение
- **NotApprovedProfileNotTrusted** - комментарий в профиле не одобрен, потому что комментатор не является доверенным
- **NotApprovedProfileNewUser** - комментарий в профиле не одобрен, потому что комментатор — новый пользователь

### События обнаружения спама
- **IsSpam** - комментарий помечен как спам детектором (включает, какой движок принял решение)
- **IsSpamDueToBadWords** - комментарий помечен как спам из-за фильтрация нецензурной лексики
- **IsSpamFromLLM** - комментарий помечен как спам движком AI/LLM (включает имя движка, ответ и количество токенов)
- **IsSpamRepeatComment** - комментарий помечен как спам за повторяемость (включает, какой движок это обнаружил)
- **NotSpamIsOnlyImage** - комментарий не помечен как спам, потому что содержит только изображения
- **NotSpamIsOnlyReacts** - комментарий не помечен как спам, потому что содержит только реакции
- **NotSpamNoLinkOrMention** - комментарий не помечен как спам из-за отсутствия подозрительных ссылок или упоминаний
- **NotSpamPerfectTrustFactor** - комментарий не помечен как спам из-за высокого доверительного фактора пользователя
- **NotSpamTooShort** - комментарий не помечен как спам, потому что он слишком короткий для анализа
- **NotSpamSkipped** - проверка на спам была пропущена
- **NotSpamFromEngine** - комментарий определён как не спам движком обнаружения (включает имя движка и доверительный фактор)

### События плохих слов/нецензурной лексики
- **BadWordsCheckFailed** - проверка фильтра нецензурной лексики завершилась с ошибкой
- **BadWordsFoundBadPhrase** - фильтр нецензурной лексики обнаружил неподобающую фразу (включает фразу)
- **BadWordsFoundBadWord** - фильтр нецензурной лексики обнаружил неподобающее слово (включает слово)
- **BadWordsNoDefinitionForLocale** - отсутствуют определения нецензурной лексики для языка комментария (включает локаль)

### События проверки пользователя
- **CommentMustBeVerifiedToApproveNotInVerifiedSession** - комментарий требует верификацию, но пользователь не в верифицированной сессии
- **CommentMustBeVerifiedToApproveNotVerifiedYet** - комментарий требует верификацию, но пользователь ещё не верифицирован
- **InVerifiedSession** - пользователь, публикующий комментарий, находится в верифицированной сессии
- **SentVerificationEmailNoSession** - письмом для верификации отправлено пользователю без сессии
- **SentWelcomeEmail** - отправлено приветственное письмо новому пользователю

### События доверия и безопасности
- **TrustFactorChanged** - доверительный фактор пользователя был изменён (включает значения до и после)
- **SpamFilterDisabledBecauseAdmin** - фильтр спама отключён для администратора
- **TenantSpamFilterDisabled** - фильтрация спама отключена для всего тенанта
- **RepeatCommentCheckIgnored** - проверка повторных комментариев была проигнорирована (включает причину)
- **UserIsAdmin** - пользователь идентифицирован как администратор
- **UserIsAdminParentTenant** - пользователь идентифицирован как администратор родительского тенанта
- **UserIsAdminViaSSO** - пользователь идентифицирован как администратор через SSO
- **UserIsMod** - пользователь идентифицирован как модератор

### Изменения статуса комментария

События изменения статуса включают значения до и после, а также пользователя, который внес изменение:

- **ExpireStatusChanged** - статус истечения срока комментария был изменён
- **ReviewStatusChanged** - статус проверки комментария был изменён
- **SpamStatusChanged** - статус спама комментария был обновлён
- **ApproveStatusChanged** - статус одобрения комментария был изменён
- **TextChanged** - текст комментария был отредактирован (включает текст до и после)
- **VotesChanged** - счётчики голосов за комментарий были обновлены (включает подробную разбивку голосов)
- **Flagged** - комментарий был отмечен флагами пользователями
- **UnFlagged** - флаги с комментария были сняты

### Действия модерации
- **Pinned** - комментарий был закреплён модератором (включает, кто закрепил)
- **UnPinned** - комментарий был откреплён модератором (включает, кто открепил)

### События уведомлений
- **CreatedNotifications** - для комментария были созданы уведомления (включает количество уведомлений)
- **NotificationCreateFailure** - не удалось создать уведомления
- **BadgeAwarded** - пользователю была присуждена награда за комментарий (включает название бейджа)

### События публикации
- **PublishedLive** - комментарий был опубликован в прямом эфире для подписчиков (включает количество подписчиков)

### Интеграционные события
- **WebhookSynced** - комментарий был синхронизирован через webhook

### События правил спама
- **SpamRuleMatch** - комментарий совпал с пользовательским правилом спама (включает детали правила)

### События локализации
- **LocaleDetectedFromText** - локаль языка автоматически определена по тексту комментария (включает обнаруженный язык и локаль)

## Сценарии использования журналов комментариев

Журналы комментариев автоматически генерируются и сохраняются вместе с каждым комментарием. Они предоставляют ценные данные для:

- **Понимания решений модерации** - видеть точно, почему комментарий был одобрен, отправлен на проверку или помечен как спам
- **Отладки проблем с одобрением/спамом** - проследить логику принятия решений, когда комментарии ведут себя не так, как ожидается
- **Отслеживания паттернов поведения пользователей** - мониторить изменения доверительного фактора и статус верификации
- **Аудита действий модераторов** - просмотреть, какие действия модераторы выполняли над конкретными комментариями
- **Исследования эффективности фильтра спама** - увидеть, какие движки обнаруживают спам, а какие — нет
- **Устранения неполадок интеграций** - проверить синхронизацию webhook и доставку уведомлений

Эти журналы помогают поддерживать прозрачность процесса модерации и способствуют тонкой настройке поведения вашей системы комментариев.