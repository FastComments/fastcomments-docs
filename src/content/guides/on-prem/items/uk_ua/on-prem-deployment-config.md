FastComments використовує змінні оточення для конфігурації. Нижченаведений перелік описує всі підтримувані змінні, що стосуються On-Prem.

| Змінна                         | За замовчуванням           | Опис                                                                                                                                               | Обов'язково | Приклади або дійсні значення                          |
|--------------------------------|-----------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|------------|-------------------------------------------------------|
| NODE_ENV                       |                             | Тип середовища.                                                                                                                                     | Так        | production, dev                                       |
| MONGO_URI                      |                             | URI підключення до БД.                                                                                                                              | Так        |                                                       |
| MONGO_ENABLE_SSL               | false                       | Увімкнення використання SSL для підключення до бази даних.                                                                                          | Ні         | true, false                                           |
| MONGO_ENABLE_SSL_VALIDATE      | false                       | Увімкнення перевірки сертифіката проти CA при підключенні до Mongo.                                                                                 | Ні         | true, false                                           |
| MONGO_SSL_CA                   |                             | Mongo SSL CA pem файл.                                                                                                                              | Ні         | /path/to/some-cert.pem                                |
| ADMIN_NOTIFICATIONS_EMAIL      |                             | Електронна адреса, куди надсилатимуться важливі системні сповіщення.                                                                                | Ні         | admin-group@bigcorp.com                               |
| IP_HASH_SALT                   |                             | Сіль для хешування IP-адрес.                                                                                                                        | Так        |                                                       |
| SESSION_SECRET                 |                             | Ключ, що використовується для підпису сесій.                                                                                                         | Так        |                                                       |
| SESSION_STORE_SECRET           |                             | Ключ, що використовується для підпису/хешування сесій у сховищі. Повинний відрізнятися від SESSION_SECRET.                                           | Так        |                                                       |
| HOSTNAME                       |                             | Ім'я хоста, де розгорнуто FastComments (адмін-панель тощо). НЕ повинно містити порт або протокол.                                                     | Так        | example.com                                           |
| HOST_ADDR                      |                             | Доступний URI, за яким розгорнуто FastComments (адмін-панель тощо).                                                                                  | Так        | https://example.com                                   |
| EMAIL_CONFIG_PATH              |                             | Шлях у локальній файловій системі до конфігурації електронної пошти (SMTP, відображення доменів/постачальників тощо).                                 | Так        | /my/config.json                                       |
| EMAIL_DEFAULT_FROM_NAME        | FastComments Robot          | Заголовок "From Name" електронної пошти.                                                                                                            | Ні         | My Company Name                                       |
| EMAIL_DEFAULT_FOOTER_LOGO      | /images/logo-32-2020-01.png | Логотип у футері електронного листа.                                                                                                                | Ні         | https://exmaple.com/footer.png                        |
| EMAIL_DEFAULT_TRANSPORT        |                             | Перевизначення для "defaultTransport" у EMAIL_CONFIG_PATH. Корисно при розгортанні одного і того ж файлу конфігурації в різних середовищах.           | Ні         | myTransportName                                       |
| ON_PREM_TENANT_ID              |                             | Ідентифікатор вашого облікового запису на fastcomments.com. Використовується для реєстрації ліцензійного ключа.                                       | Ні         |                                                       |
| ON_PREM_LICENSE_KEY            |                             | Ліцензійний ключ для локального розгортання.                                                                                                        | Ні         |                                                       |
| GIPHY_API_KEY                  |                             | API-ключ Giphy. Якщо не вказано, слід створити правило конфігурації, яке вимикає вибір GIF.                                                         | Ні         |                                                       |
| GIPHY_DEFAULT_RATING           | pg                          | Використовується для інтеграції з giphy. Може бути також перевизначено правилами налаштування віджета.                                               | Ні         | g, pg, pg-13, r                                       |
| OPENAI_SECRET_KEY              |                             | Використовується для функцій на базі openai, наприклад для необов'язкового GPT-детектора спаму.                                                     | Ні         |                                                       |
| CDN_HOST_ADDR                  |                             | Ім'я хоста, звідки будуть завантажуватися ресурси. За замовчуванням значення HOSTNAME.                                                              | Ні         | example.com                                           |
| LARGE_FILE_HOST_ADDR           |                             | Ім'я хоста, звідки завантажуються великі файли (наприклад експорт). За замовчуванням значення CDN_HOST_ADDR.                                         | Ні         | example.com                                           |
| LARGE_FILE_LOCATION_TYPE       | local_disk                  | Де повинні зберігатися великі файли, наприклад експорт.                                                                                             | Ні         | local_disk, s3                                        |
| FROM_EMAIL_HOST                |                             | Ім'я хоста, від якого мають надсилатися електронні листи.                                                                                            | Ні         | example.com                                           |
| COOKIE_ID                      | fastcomments.sid            | Назва cookie для fastcomments.                                                                                                                       | Ні         |                                                       |
| COOKIE_HOSTNAME                | .fastcomments.com           | Значення поля cookie "hostname". Рекомендується додавати префікс крапки.                                                                            | Ні         | .example.com                                          |
| S3_ACCESS_KEY                  |                             | Використовується для завантажень файлів користувачів, аватарів тощо. За замовчуванням локальна ФС, якщо не визначено.                                | Ні         |                                                       |
| S3_SECRET_KEY                  |                             | Використовується для завантажень файлів користувачів, аватарів тощо.                                                                                 | Ні         |                                                       |
| S3_REGION                      |                             | Використовується для завантажень файлів користувачів, аватарів тощо.                                                                                 | Ні         |                                                       |
| S3_BUCKET                      |                             | Використовується для завантажень файлів користувачів, аватарів тощо.                                                                                 | Ні         |                                                       |
| S3_HOST                        |                             | Використовується для завантажень файлів користувачів, аватарів тощо.                                                                                 | Ні         |                                                       |
| CACHE_DIR                      |                             | Розташування для зберігання необов'язкового офлайн-кешу на випадок недоступності БД. Періодично оновлюється топ-100 потоків коментарів.               | Ні         |                                                       |
| BACKUP_DIR                     |                             | Розташування для зберігання даних на випадок недоступності БД. Якщо коментар надіслано під час недоступності БД, він потрапляє сюди і обробляється пізніше. | Ні         |                                                       |

Зверніть увагу, що всі змінні, пов'язані з доменом, використовують постфікс `_HOST` або `_ADDR`. Різниця полягає в наступному:

- `_HOST`: `example.com`
- `_ADDR`: `https://example.com`

`EMAIL_CONFIG_PATH` повинен містити шлях до JSON-файлу з наступним прикладним форматом:

[inline-code-attrs-start title = 'Конфігурація електронної пошти'; type = 'json'; isFunctional = false; inline-code-attrs-end]
[inline-code-start]
{
    "defaultDKIM": {
        "domainName": "mycompany.org",
        "keySelector": "2024",
        "privateKey": "-----BEGIN PRIVATE KEY-----\nABCDEFG\n-----END PRIVATE KEY-----"
    },
    "providerTransports": {
        "yahoo.com": "specialTransport"
    },
    "defaultTransport": "mailgun",
    "transports": {
        "mailgun": {
            "host": "smtp.mailgun.org",
            "port": 587,
            "secure": false,
            "auth": {
                "user": "admin@somewhere.com",
                "pass": "password"
            },
            "tls": {
                "ciphers": "SSLv3"
            }
        },
        "specialTransport": {
            "host": "smtp.someplace.org",
            "port": 587,
            "secure": false,
            "auth": {
                "user": "admin@example.com",
                "pass": "password"
            },
            "tls": {
                "ciphers": "SSLv3"
            }
        }
    }
}
[inline-code-end]

У наведеному прикладі ми визначаємо стандартний `SMTP` транспорт електронної пошти під назвою `mailgun`. Ми також визначаємо спеціальний транспорт, який використовуємо саме для листів `@yahoo.com`. У деяких сценаріях бажано використовувати певного провайдера або IP-адресу відправника для домену, щоб налаштувати доставку. Це опціонально.

### DocumentDB

Під час підключення до `DocumentDB` ви захочете вказати `MONGO_ENABLE_SSL=true MONGO_SSL_CA=/some/path.pem`, щоб бути сумісними з налаштуваннями за замовчуванням.