---
### Απαιτούμενα Συστατικά

Για On-Prem, το FastComments αποτελείται μόνο από έναν διακομιστή εφαρμογής και μια βάση δεδομένων. Έχουμε απλοποιήσει την ανάπτυξη έτσι ώστε
η εφαρμογή να μπορεί να εξυπηρετεί όλη την κίνηση απευθείας χωρίς να προσθέτει άλλα συστατικά.

Ο διακομιστής εφαρμογής παρέχεται σε ένα Docker image και μπορεί να αναπτυχθεί με οποιαδήποτε λύση διαχείρισης κοντέινερ.

Η βάση δεδομένων, MongoDB, μπορεί να τρέχεται αυτοδιαχειριζόμενα ή να φιλοξενείται από κάποιον άλλο πάροχο όπως το AWS DocumentDB ή το MongoDB Atlas.

Το FastComments έχει δοκιμαστεί προς το παρόν με το MongoDB 7, ωστόσο στοχεύουμε στη συμβατότητα με το DocumentDB για να διευκολύνουμε την ανάπτυξη.

### Instance Sizes

Θα διαπιστώσετε ότι το FastComments είναι σχετικά καλά βελτιστοποιημένο και δεν απαιτεί μεγάλες μηχανές για την ίδια την εφαρμογή ώστε να διατηρεί χαμηλά P99s.

Όλοι οι batch και cron jobs χρησιμοποιούν streaming για να περιορίσουν τη συνολική χρήση μνήμης.

Οι παρακάτω πίνακες για τον διακομιστή εφαρμογής και τη βάση δεδομένων μπορούν να βοηθήσουν στο sizing.

### Application Server Instances


| Concurrent Users | Total Cluster CPUs | Total Cluster Memory |
|------------------|--------------------|----------------------|
| 100              | 1                  | 256mb                |
| 1K               | 2                  | 512mb                |
| 10K              | 8                  | 1gb                  |
| 100K             | 32                 | 8gb                  |
| 1M               | 64                 | 64gb                 |

Για παράδειγμα, ένας μεμονωμένος πυρήνας που εξυπηρετεί περίπου 100 threads σχολίων το δευτερόλεπτο συνήθως δεν χρησιμοποιεί περισσότερο από 250mb RSS.

### Database Server Instances

Το sizing της βάσης δεδομένων εξαρτάται από το μέγεθος του working set, που είναι η ποσότητα δεδομένων στην οποία έχετε πρόσβαση σε μια δεδομένη στιγμή, καθώς και από τα ταυτόχρονα αιτήματα.

Το FastComments είναι σχετικά φιλικό προς το Mongo, καθώς για τα hot queries χρησιμοποιεί index hints, streaming cursors, και έχει όρια concurrency σε διάφορες περιοχές
για να αποτρέψει την υπερφόρτωση των downstream συστημάτων.

Τα παρακάτω είναι ένας γενικός οδηγός για τα μεγέθη των database instances. **Σημειώστε ότι αυτό είναι __ανά instance__, όχι οι συνολικοί πόροι στο cluster**.

| Concurrent Users | Comments Stored | CPUs Per Instance | Memory Per Instance |
|------------------|-----------------|-------------------|---------------------|
| 100              | 1k              | 1                 | 256mb               |
| 1K               | 5k              | 2                 | 512mb               |
| 10K              | 100k            | 8                 | 2gb                 |
| 100K             | 500k            | 16                | 8gb                 |
| 1M               | 5M              | 32                | 32gb                |

Οι παραπάνω πίνακες είναι συντηρητικές εκτιμήσεις. Μπορεί να διαπιστώσετε ότι οι πραγματικές απαιτήσεις διαφέρουν ανάλογα με τη συγκεκριμένη διαμόρφωσή σας (μέγεθος σελίδων, όγκος σχολίων, κ.λπ).

---