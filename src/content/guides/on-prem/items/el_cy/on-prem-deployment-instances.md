### Απαιτούμενα Συστατικά

Για επιτόπια (On-Prem), το FastComments αποτελείται απλώς από έναν διακομιστή εφαρμογής και μια βάση δεδομένων. Έχουμε απλοποιήσει την ανάπτυξη έτσι ώστε η εφαρμογή να μπορεί να εξυπηρετεί όλη την κίνηση απευθείας χωρίς την προσθήκη άλλων στοιχείων.

Ο διακομιστής εφαρμογής παρέχεται σε εικόνα Docker και μπορεί να αναπτυχθεί με οποιαδήποτε λύση διαχείρισης κοντέινερ.

Η βάση δεδομένων, MongoDB, μπορεί να τρέξει τοπικά ή να φιλοξενηθεί από άλλον πάροχο όπως AWS DocumentDB ή MongoDB Atlas.

Το FastComments αυτή τη στιγμή δοκιμάζεται με MongoDB 7, ωστόσο στοχεύουμε σε συμβατότητα με DocumentDB για να διευκολύνουμε την ανάπτυξη.

### Μεγέθη Περιπτώσεων

Θα διαπιστώσετε ότι το FastComments είναι αρκετά βελτιστοποιημένο και δεν απαιτεί μεγάλες μηχανές για την ίδια την εφαρμογή ώστε να διατηρεί χαμηλά P99s.

Όλες οι εργασίες batch και cron χρησιμοποιούν streaming για να περιορίσουν τη συνολική χρήση μνήμης.

Οι παρακάτω πίνακες για τον διακομιστή εφαρμογής και τη βάση δεδομένων μπορούν να βοηθήσουν στον καθορισμό μεγέθους.

### Παραδείγματα Διακομιστή Εφαρμογής


| Ταυτόχρονοι Χρήστες | Συνολικοί CPU του Cluster | Συνολική Μνήμη του Cluster |
|------------------|--------------------|----------------------|
| 100              | 1                  | 256mb                |
| 1K               | 2                  | 512mb                |
| 10K              | 8                  | 1gb                  |
| 100K             | 32                 | 8gb                  |
| 1M               | 64                 | 64gb                 |

Για παράδειγμα, ένας μόνος πυρήνας που εξυπηρετεί περίπου 100 νήματα σχολίων το δευτερόλεπτο συνήθως δεν χρησιμοποιεί ποτέ περισσότερα από 250mb RSS.

### Παραδείγματα Διακομιστή Βάσης Δεδομένων

Το μέγεθος της βάσης δεδομένων εξαρτάται από το μέγεθος του working set (το ποσό δεδομένων που προσπελάζετε σε μια δεδομένη χρονική στιγμή), καθώς και από τις ταυτόχρονες αιτήσεις.

Το FastComments είναι σχετικά φιλικό προς το Mongo, καθώς για τα "hot" ερωτήματα χρησιμοποιεί index hints, streaming cursors, και έχει όρια ταυτόχρονης εκτέλεσης σε διάφορες περιοχές για να αποτρέψει την υπερφόρτωση των downstream συστημάτων.

Παρακάτω είναι ένας γενικός οδηγός για τα μεγέθη των περιπτώσεων βάσης δεδομένων. **Σημειώστε ότι αυτό ισχύει __ανά περίπτωση__, όχι για τους συνολικούς πόρους στο cluster**.

| Ταυτόχρονοι Χρήστες | Αποθηκευμένα Σχόλια | CPUs ανά περίπτωση | Μνήμη ανά περίπτωση |
|------------------|-----------------|-------------------|---------------------|
| 100              | 1k              | 1                 | 256mb               |
| 1K               | 5k              | 2                 | 512mb               |
| 10K              | 100k            | 8                 | 2gb                 |
| 100K             | 500k            | 16                | 8gb                 |
| 1M               | 5M              | 32                | 32gb                |

Οι παραπάνω πίνακες είναι συντηρητικές εκτιμήσεις. Μπορεί να διαπιστώσετε ότι οι πραγματικές απαιτήσεις διαφέρουν ανάλογα με τη συγκεκριμένη διαμόρφωσή σας (μεγέθη σελίδων, όγκος σχολίων, κ.λπ).

---