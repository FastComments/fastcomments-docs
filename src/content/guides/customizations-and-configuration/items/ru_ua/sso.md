SSO, или single-sign-on, — это набор соглашений, позволяющих вам или вашим пользователям использовать FastComments без необходимости создавать ещё одну учётную запись.

Предполагая, что вы не разрешаете анонимные комментарии, для комментирования в FastComments требуется учётная запись. Мы делаем процесс регистрации очень простым — пользователь просто оставляет свой email при комментировании.
Однако мы понимаем, что даже это может быть лишним трением, от которого некоторые сайты хотят избавиться.

Мы можем уменьшить это трение, имея только один поток входа для всего вашего сайта.

### How do I get it?
Все типы аккаунтов в настоящее время получают доступ к SSO. Однако максимальное количество пользователей SSO будет варьироваться в зависимости от вашего пакета. Как и с другими функциями, планы Pro и выше предоставляют прямую поддержку разработки.

Давайте сравним варианты, а затем разберём детали каждого.

### User and Comment Migrations

При миграции с платформы с SSO, такой как Disqus, у вас уже будут пользователи и их комментарии.

Комментарии импортируются в рамках вашей миграции либо через API, наш Import UI, либо службой поддержки. Import UI предпочтителен, если он поддерживает платформу, с которой вы
мигрируете, поскольку он включает обработку ошибок, извлечение и загрузку аватаров и медиа, а также систему мониторинга пакетных задач.

Пользователи сами добавляются автоматически при первом просмотре веток комментариев. Альтернативно, их можно предварительно добавить через API, но у этой работы нет
многих преимуществ.

Если комментарии импортированы, а пользователи SSO не добавлены вручную через API, то комментарии будут автоматически перенесены в аккаунт пользователя при первом
создании его аккаунта при просмотре любой ветки комментариев. После этого они смогут управлять, редактировать и удалять комментарии, которые изначально написали.

Автоматическая миграция выполняется по email или имени пользователя. Некоторые платформы не предоставляют email при экспорте, например Disqus, поэтому в таком случае мы используем имя пользователя.
- Пока вы передаёте совпадающее имя пользователя и email в SSO-пейлоаде, мы добавим email в отдельные объекты комментариев, чтобы уведомления и упоминания работали.

Если требуется импортировать комментарии и пользователей одновременно, работайте со службой поддержки, чтобы перенести комментарии на соответствующие аккаунты пользователей после того, как пользователи
будут импортированы через API.

Итак, чтобы суммировать самый простой путь миграции:

1. Импортируйте комментарии.
   1. Аватары и другие медиа мигрируются автоматически при использовании Import UI в `Manage Data -> Imports`.
2. Настройте Secure или Simple SSO.
3. Позвольте миграции происходить автоматически для каждого пользователя при их первом входе.
   1. Это обычно добавляет менее секунды к времени загрузки страницы, если у пользователя менее 50k комментариев.

### WordPress Users
Если вы используете наш <a href="https://wordpress.org/plugins/fastcomments/" target="_blank">плагин WordPress</a>, то писать код не нужно! Просто перейдите на страницу администратора плагина, нажмите SSO Settings, а затем Enable.

Это приведёт вас в мастер с одним нажатием кнопки, который создаст ваш API-ключ, отправит его на ваш WordPress и включит SSO. Мы объединили это в одно нажатие для вашего удобства.

Обратите внимание, что если вы устанавливаете плагин впервые, вам придётся пройти процесс настройки, прежде чем вы увидите страницу администратора с кнопкой SSO Settings.

#### WordPress SSO - Moderators

Обратите внимание, что в настоящее время для отображения бейджа «Модератор» рядом с вашими модераторами при комментировании с помощью плагина FastComments для WordPress,
они также должны быть добавлены в качестве Модератора на панели FastComments и иметь подтверждённый email.

### Custom Integrations

Для пользовательских интеграций есть два варианта.

### Option One - Secure SSO

С Secure SSO FastComments знает, что пользователь, который комментирует, голосует и читает комментарии, — это реальный пользователь на вашем сайте.

Пока вы создаёте корректный пейлоад, пользователь всегда получает бесшовный опыт комментирования.

С Secure SSO SSO-пейлоад создаётся **на стороне сервера** с использованием HMAC-аутентификации и затем передаётся виджету **на клиенте**.

С Secure SSO аккаунт пользователя **полностью отделён** от остальной базы пользователей FastComments. Это означает, что если у нас есть два партнёра
Компания A и Компания B, у каждого может быть SSO-пользователь с именем пользователя "Bob".

#### Requirements
- Базовые навыки разработки серверной части.
- Базовые знания по работе с секретными API-ключами.
- Базовые знания по разработке API или серверному рендерингу.

#### Pros
- Безопасно.
- Бесшовный опыт комментирования.

#### Cons
- Требуется разработка серверной части.

#### Updating User Data

С Secure SSO каждый раз, когда вы передаёте SSO-пейлоад пользователя, мы обновляем его профиль с последней информацией. Например, если
у пользователя имя пользователя `X`, и вы передаёте `Y` в SSO-пейлоаде, его имя пользователя станет `Y`.

Если вы хотите удалить значения, используя этот подход, установите их в `null` (не `undefined`).

#### Secure SSO API

Мы также предоставляем API для взаимодействия с SSO-пользователями. Смотрите [the docs](/guide-api.html#sso-user-structure).

Обратите внимание, что при использовании Secure SSO пользователи автоматически создаются в фоне при загрузке страницы. Вам не нужно массово импортировать ваших пользователей.

### Option Two - Simple SSO

Альтернатива Secure SSO — просто передавать информацию о пользователе в виджет комментариев.

Предоставление email при Simple SSO не обязательно, однако без него их комментарии будут отображаться как "Unverified".

<sup>Примечание!</sup> По состоянию на начало 2022 года имена пользователей при Simple SSO не обязаны быть уникальными по всему FastComments.com.

Идеально, Simple SSO следует выбирать только при разработке на платформе, которая не предоставляет доступ к серверной части.

#### Requirements
- Базовые знания клиентской разработки.
- Необходимо знать по крайней мере email пользователя.

#### Pros
- Просто.
- Вся активность по-прежнему проверяется.
- Пользователь никогда не вводит своё имя пользователя или email.

#### Cons
- Менее безопасно, чем Secure SSO, поскольку пейлоад на стороне клиента может быть подделан для притворства любым пользователем.

#### Simple SSO API

Пользователи, автоматически созданные через поток Simple SSO, хранятся как `SSOUser` объекты. К ним можно получить доступ и управлять ими через `SSOUser` API. Смотрите [the docs](/guide-api.html#sso-user-structure).