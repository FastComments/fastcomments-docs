Настройка аутентификации SAML в FastComments требует как конфигурации в вашей панели администратора, так и настройки у вашего провайдера удостоверений.

### Требования

Прежде чем настраивать SAML, убедитесь, что у вас есть:

- План FastComments Flex или Pro (SAML недоступен на плане Creators)
- Административный доступ к вашей учётной записи FastComments
- Административный доступ к вашему провайдеру удостоверений
- SAML-метаданные или информация о сертификате вашего IdP

### Доступ к конфигурации SAML

1. Войдите в [панель администратора FastComments](https://fastcomments.com/auth/my-account)
2. Перейдите в **API/SSO Settings** в левой боковой панели
3. Нажмите кнопку **SAML Config**

Если вы не видите кнопку SAML Config, проверьте, что:
- Ваша учетная запись имеет требуемый пакет (Flex или Pro)
- У вас есть административные права
- Ваш пользователь имеет роли API Admin или Admin Admin

### Основная конфигурация SAML

#### Enable SAML Authentication

1. Установите флажок **Enable SAML Authentication**
2. Это активирует SAML для вашего тенанта и сделает доступными поля конфигурации

#### Обязательные поля

**IdP Single Sign-On URL** *(Обязательно)*
- URL, на который пользователи будут перенаправляться для аутентификации
- Обычно предоставляется вашим провайдером удостоверений
- Пример: `https://your-company.okta.com/app/fastcomments/sso/saml`

**IdP X.509 Certificate** *(Обязательно)*
- Публичный сертификат от вашего провайдера удостоверений
- Используется для проверки подлинности SAML-ответов
- Должен включать полный сертификат с маркерами BEGIN/END
- Пример формата:
```
-----BEGIN CERTIFICATE-----
MIICXjCCAcegAwIBAgIBADANBgkqhkiG9w0BAQsFADA...
-----END CERTIFICATE-----
```

#### Необязательные поля

**IdP Entity ID / Issuer**
- Идентифицирует вашего провайдера удостоверений
- Если оставить пустым, по умолчанию используется FastComments URL
- Должно совпадать с issuer, настроенным в вашем IdP

### Расширенная конфигурация

#### Настройки безопасности

**Signature Algorithm**
- По умолчанию SHA-256 (рекомендуется)
- Варианты: SHA-1, SHA-256, SHA-512
- Должно соответствовать конфигурации вашего IdP

**Digest Algorithm**
- По умолчанию SHA-256 (рекомендуется)
- Используется для вычисления дайджеста в SAML-ответах
- Должно соответствовать конфигурации вашего IdP

**Name ID Format**
- По умолчанию формат Email Address
- Определяет, как формируются идентификаторы пользователей
- Частые варианты: Email Address, Persistent, Transient

#### Шифрование (необязательно)

**Private Key for Decryption**
- Требуется только если ваш IdP шифрует SAML-утверждения
- Вставьте приватный ключ, используемый для расшифровки
- В большинстве развертываний шифрование утверждений не требуется

### Сохранение конфигурации

1. Проверьте все настройки на предмет корректности
2. Нажмите **Save SAML Configuration**
3. Система проверит вашу конфигурацию
4. В случае успеха вы увидите сообщение подтверждения

### Дальнейшие шаги

После сохранения конфигурации SAML в FastComments:

1. Настройте ваш провайдер удостоверений, используя информацию Service Provider
2. Протестируйте поток аутентификации
3. Настройте роли и разрешения пользователей по необходимости

Информация о Service Provider, необходимая для настройки вашего IdP, будет отображена после включения SAML.