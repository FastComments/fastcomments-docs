FastComments αντιστοιχίζει ρόλους χρηστών SAML σε εσωτερικές άδειες, επιτρέποντας τον έλεγχο πρόσβασης με βάση ρόλους για τον οργανισμό σας.

### Σύστημα Ρόλων FastComments

Το FastComments χρησιμοποιεί ένα σύστημα δικαιωμάτων βασισμένο σε ρόλους όπου οι χρήστες μπορούν να έχουν έναν ή περισσότερους ρόλους που καθορίζουν τα επίπεδα πρόσβασης και τις δυνατότητές τους.

### Διαθέσιμοι Ρόλοι FastComments

#### Διοικητικοί Ρόλοι

**fc-account-owner**
- **Permissions**: Πλήρης διοικητική πρόσβαση
- **Capabilities**: Όλες οι λειτουργίες, διαχείριση χρεώσεων, διαχείριση χρηστών
- **Use Case**: Κύριοι διαχειριστές λογαριασμού και ιδιοκτήτες

**fc-admin-admin**  
- **Permissions**: Διοικητική πρόσβαση στις περισσότερες λειτουργίες
- **Capabilities**: Διαχείριση χρηστών, ρύθμιση, εποπτεία. **Μπορεί να διαχειρίζεται άλλους admins.**
- **Use Case**: Δευτερεύοντες διαχειριστές και προσωπικό IT

**fc-billing-admin**
- **Permissions**: Διαχείριση χρεώσεων και συνδρομών
- **Capabilities**: Μέθοδοι πληρωμής, τιμολόγια, αλλαγές συνδρομής
- **Use Case**: Μέλη της ομάδας οικονομικών και επαφές χρεώσεων

#### Εξειδικευμένοι Ρόλοι

**fc-analytics-admin**
- **Permissions**: Πρόσβαση σε αναλύσεις και αναφορές
- **Capabilities**: Προβολή στατιστικών ιστότοπου, δεδομένων εμπλοκής χρηστών
- **Use Case**: Ομάδες μάρκετινγκ και αναλυτές δεδομένων

**fc-api-admin**
- **Permissions**: Πρόσβαση και διαχείριση API
- **Capabilities**: Πιστοποιητικά API, ρύθμιση webhooks
- **Use Case**: Προγραμματιστές και τεχνικοί ενσωματωτές

**fc-moderator**
- **Permissions**: Δυνατότητες εποπτείας σχολίων
- **Capabilities**: Έγκριση/απόρριψη σχολίων, διαχείριση ανεπιθύμητου περιεχομένου (spam)
- **Use Case**: Συντονιστές κοινότητας και διαχειριστές περιεχομένου

### Διαμόρφωση Αντιστοίχισης Ρόλων

#### Πηγές Χαρακτηριστικών SAML

Το FastComments δέχεται πληροφορίες ρόλων από διάφορα ονόματα χαρακτηριστικών SAML για να διασφαλίσει συμβατότητα με διαφορετικούς παρόχους ταυτότητας:

**Standard Attribute Names**:
- `roles`
- `groups` 
- `memberOf`
- `role`
- `group`

**Microsoft/ADFS Attributes**:
- `http://schemas.microsoft.com/ws/2008/06/identity/claims/role`
- `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role`

#### Υποστηριζόμενες Μορφές Ρόλων

**Μορφή Πίνακα** *(Προτιμώμενο)*:
```xml
<saml:Attribute Name="roles">
    <saml:AttributeValue>fc-admin-admin</saml:AttributeValue>
    <saml:AttributeValue>fc-moderator</saml:AttributeValue>
</saml:Attribute>
```

**Μορφή Διαχωρισμένη με Κόμμα**:
```xml
<saml:Attribute Name="roles">
    <saml:AttributeValue>fc-admin-admin,fc-moderator</saml:AttributeValue>
</saml:Attribute>
```

**Μορφή Ενός Ρόλου**:
```xml
<saml:Attribute Name="roles">
    <saml:AttributeValue>fc-admin-admin</saml:AttributeValue>
</saml:Attribute>
```

### Διαμόρφωση Ρόλων Παρόχου Ταυτότητας

#### Microsoft Azure AD

1. **Διαμόρφωση Ρόλων Εφαρμογής**:
   - Ορίστε ρόλους FastComments στην εφαρμογή Azure AD σας
   - Αναθέστε χρήστες στους κατάλληλους ρόλους εφαρμογής
   - Διαμορφώστε τα claims ώστε να περιλαμβάνουν τους ανατεθέντες ρόλους

2. **Αντιστοίχιση Χαρακτηριστικών**:
   ```
   Attribute Name: roles
   Source Attribute: user.assignedroles
   ```

#### Okta

1. **Ανάθεση Ομάδας**:
   - Δημιουργήστε ομάδες που αντιστοιχούν στα ονόματα ρόλων του FastComments
   - Αναθέστε χρήστες στις κατάλληλες ομάδες
   - Διαμορφώστε δηλώσεις χαρακτηριστικών

2. **Δήλωση Χαρακτηριστικού**:
   ```
   Name: roles
   Value: user.groups
   Filter: Starts with "fc-"
   ```

#### Google Workspace

1. **Αντιστοίχιση Ομάδων**:
   - Δημιουργήστε οργανωτικές μονάδες ή ομάδες
   - Ονομάστε τις ομάδες με προθέματα ρόλων FastComments
   - Διαμορφώστε την αντιστοίχιση χαρακτηριστικών

2. **Προσαρμοσμένα Χαρακτηριστικά**:
   ```
   Attribute Name: roles
   Value: Groups or custom schema attribute
   ```

### Προεπιλεγμένη Συμπεριφορά Χρήστη

#### Χρήστες Χωρίς Ρόλους

Όταν ένας χρήστης SAML δεν έχει ρόλους ή έχει μη αναγνωρισμένους ρόλους:
- Ο χρήστης δημιουργείται ως τυπικός σχολιαστής
- Δεν αποκτάται διοικητική πρόσβαση
- Μπορεί να δημοσιεύει και να διαχειρίζεται τα δικά του σχόλια
- Δεν έχει πρόσβαση σε λειτουργίες πίνακα διαχείρισης (admin dashboard)

#### Κληρονομικότητα Ρόλων

- Οι χρήστες μπορούν να έχουν πολλαπλούς ρόλους ταυτόχρονα
- Τα δικαιώματα συσσωρεύονται (εφαρμόζεται το υψηλότερο επίπεδο δικαιωμάτων)
- Οι αλλαγές ρόλων στον IdP αντικατοπτρίζονται στην επόμενη είσοδο

### Διαχείριση Χρηστών SAML

#### Δημιουργία Χρήστη

Όταν ένας χρήστης συνδέεται μέσω SAML για πρώτη φορά:
1. **User Account**: Δημιουργείται αυτόματα με το email ως αναγνωριστικό
2. **Role Assignment**: Οι ρόλοι εφαρμόζονται με βάση τα χαρακτηριστικά SAML
3. **Profile Information**: Το όνομα/επώνυμο συμπληρώνεται εφόσον παρέχεται
4. **Permission Activation**: Οι ρόλοι γίνονται ενεργοί άμεσα

#### Ενημερώσεις Ρόλων

Υφιστάμενοι χρήστες SAML λαμβάνουν ενημερώσεις ρόλων:
1. **Login Trigger**: Οι ενημερώσεις ρόλων συμβαίνουν σε κάθε σύνδεση SAML
2. **Immediate Effect**: Τα νέα δικαιώματα εφαρμόζονται άμεσα
3. **Role Removal**: Αφαιρούμενοι ρόλοι ανακαλούνται αυτόματα
4. **Audit Trail**: Οι αλλαγές ρόλων καταγράφονται στα audit logs

### Προσαρμοσμένη Αντιστοίχιση Ρόλων

#### Επιχειρησιακή Προσαρμογή

Για επιχειρηματικούς πελάτες με ειδικές απαιτήσεις:
- Μπορούν να αντιστοιχιστούν προσαρμοσμένα ονόματα ρόλων σε δικαιώματα FastComments
- Μπορούν να υλοποιηθούν σύνθετες ιεραρχίες ρόλων
- Μπορούν να διαμορφωθούν ελέγχοι πρόσβασης κατά τμήμα

Επικοινωνήστε με την υποστήριξη FastComments για ρυθμίσεις προσαρμοσμένης αντιστοίχισης ρόλων.

#### Επικύρωση Ρόλων

Το FastComments επικυρώνει τους εισερχόμενους ρόλους:
- Οι μη αναγνωρισμένοι ρόλοι αγνοούνται (δεν απορρίπτονται)
- Τα κακομορφωμένα χαρακτηριστικά ρόλων καταγράφονται για αντιμετώπιση προβλημάτων
- Οι χρήστες διατηρούν τους υπάρχοντες ρόλους εάν η δήλωση SAML δεν περιέχει πληροφορίες ρόλων

### Καλές Πρακτικές

#### Διαχείριση Ρόλων

1. **Principle of Least Privilege**: Αναθέστε τα ελάχιστα απαραίτητα δικαιώματα
2. **Regular Auditing**: Ελέγχετε περιοδικά τους ρόλους χρηστών και την πρόσβαση  
3. **Clear Naming**: Χρησιμοποιείτε περιγραφικά ονόματα ομάδων στον IdP
4. **Documentation**: Διατηρείτε τεκμηρίωση των αναθέσεων ρόλων

#### Θέματα Ασφαλείας

1. **Role Attributes**: Βεβαιωθείτε ότι τα χαρακτηριστικά ρόλων προστατεύονται σωστά στις απαντήσεις SAML
2. **Attribute Validation**: Επαληθεύστε ότι μόνο εξουσιοδοτημένα συστήματα μπορούν να αναθέτουν ρόλους
3. **Access Reviews**: Ελέγχετε τακτικά τις αναθέσεις διοικητικών ρόλων
4. **Monitoring**: Παρακολουθείτε τις αλλαγές ρόλων και τις διοικητικές ενέργειες

### Αντιμετώπιση Προβλημάτων Ρόλων

#### Συνηθισμένα Προβλήματα

**Roles Not Applied**:
- Ελέγξτε ότι τα ονόματα χαρακτηριστικών SAML ταιριάζουν με τις υποστηριζόμενες μορφές
- Επαληθεύστε ότι ο IdP αποστέλλει πληροφορίες ρόλων
- Επιβεβαιώστε ότι οι τιμές ρόλων ταιριάζουν ακριβώς με τα ονόματα ρόλων του FastComments

**Access Denied**:
- Επαληθεύστε ότι ο χρήστης έχει τον κατάλληλο ρόλο ανατεθειμένο στον IdP
- Ελέγξτε την ορθογραφία και την ευαισθησία ως προς το κεφαλαίο/πεζό
- Επιβεβαιώστε ότι ο ρόλος είναι σωστά μορφοποιημένος στην απάντηση SAML

**Missing Permissions**:
- Επανεξετάστε τους ορισμούς ρόλων και τα απαιτούμενα δικαιώματα
- Ελέγξτε για συγκρουόμενες αναθέσεις ρόλων
- Επαληθεύστε ότι ο χρήστης έχει συνδεθεί μετά από αλλαγές ρόλων

---