Настройка аутентификации SAML в FastComments требует как конфигурации в вашей админ-панели, так и настройки в вашем Identity Provider.

### Требования

Прежде чем настраивать SAML, убедитесь, что у вас есть:

- План FastComments Flex или Pro (SAML недоступен на плане Creators)
- Административный доступ к вашей учетной записи FastComments
- Административный доступ к вашему Identity Provider
- SAML-метаданные или информация о сертификате вашего IdP

### Доступ к настройкам SAML

1. Войдите в вашу [FastComments admin dashboard](https://fastcomments.com/auth/my-account)
2. Перейдите в **API/SSO Settings** в левой боковой панели
3. Нажмите кнопку **SAML Config**

Если вы не видите кнопку SAML Config, проверьте:
- Имеет ли ваша учетная запись требуемый пакет (Flex или Pro)
- Есть ли у вас права администратора
- Есть ли у вашего пользователя роли API Admin или Admin Admin

### Базовая конфигурация SAML

#### Включение аутентификации SAML

1. Установите флажок **Enable SAML Authentication**
2. Это активирует SAML для вашего тенанта и сделает доступными поля конфигурации

#### Обязательные поля

**IdP Single Sign-On URL** *(Обязательно)*
- URL, на который пользователи будут перенаправлены для аутентификации
- Обычно предоставляется вашим Identity Provider
- Пример: `https://your-company.okta.com/app/fastcomments/sso/saml`

**IdP X.509 Certificate** *(Обязательно)*
- Публичный сертификат от вашего Identity Provider
- Используется для проверки подлинности SAML-ответов
- Должен включать полный сертификат с маркерами BEGIN/END
- Пример формата:
```
-----BEGIN CERTIFICATE-----
MIICXjCCAcegAwIBAgIBADANBgkqhkiG9w0BAQsFADA...
-----END CERTIFICATE-----
```

#### Необязательные поля

**IdP Entity ID / Issuer**
- Идентифицирует ваш Identity Provider
- Если оставить пустым, по умолчанию используется ваш URL FastComments
- Должно совпадать с issuer, настроенным в вашем IdP

### Расширенная конфигурация

#### Настройки безопасности

**Signature Algorithm**
- По умолчанию SHA-256 (рекомендуется)
- Варианты: SHA-1, SHA-256, SHA-512
- Должен соответствовать конфигурации вашего IdP

**Digest Algorithm**
- По умолчанию SHA-256 (рекомендуется)
- Используется для вычисления дайджеста в SAML-ответах
- Должен соответствовать конфигурации вашего IdP

**Name ID Format**
- По умолчанию формат Email Address
- Определяет, как форматируются идентификаторы пользователей
- Распространенные варианты: Email Address, Persistent, Transient

#### Шифрование (необязательно)

**Private Key for Decryption**
- Требуется только если ваш IdP шифрует SAML assertions
- Вставьте ваш приватный ключ, используемый для расшифровки
- Для большинства развёртываний шифрование assertions не требуется

### Сохранение конфигурации

1. Проверьте все настройки на корректность
2. Нажмите **Save SAML Configuration**
3. Система проверит вашу конфигурацию
4. В случае успеха вы увидите сообщение подтверждения

### Следующие шаги

После сохранения конфигурации SAML в FastComments:

1. Настройте ваш Identity Provider, используя информацию о Service Provider
2. Протестируйте поток аутентификации
3. Настройте роли и разрешения пользователей по необходимости

Информация о Service Provider, необходимая для настройки вашего IdP, будет отображена после включения SAML.