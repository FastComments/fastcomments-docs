Коли SAML увімкнено в FastComments, система автоматично генерує інформацію про Service Provider (SP), яку потрібно налаштувати у вашому постачальнику ідентифікації.

### Доступ до інформації про Service Provider

Інформація SP відображається на сторінці конфігурації SAML після ввімкнення автентифікації SAML. Ця інформація включає всі деталі, які потрібні вашому постачальнику ідентифікації для встановлення довірчих відносин SAML.

### Endpoint-адреси Service Provider

#### SP Entity ID / Audience
**Purpose**: Унікально ідентифікує ваш екземпляр FastComments як провайдера послуг  
**Format**: `https://fastcomments.com/saml/{your-tenant-id}`  
**Usage**: Налаштуйте це як Entity ID або Audience у вашому IdP

Цей ідентифікатор гарантує, що SAML-відповіді призначені для конкретного tenant-у FastComments і запобігає прийому SAML-відповідей іншими екземплярами.

#### Assertion Consumer Service (ACS) URL
**Purpose**: Endpoint, куди ваш IdP надсилає SAML-відповіді після автентифікації користувача  
**Format**: `https://fastcomments.com/saml/callback/{your-tenant-id}`  
**Usage**: Налаштуйте це як ACS URL або Reply URL у вашому IdP

Саме сюди користувачів перенаправляють після успішної автентифікації через ваш постачальник ідентифікації, разом із SAML-утвердженням, що містить інформацію про користувача.

#### SP Metadata URL
**Purpose**: Надає повну SAML-конфігурацію у стандартному XML-форматі  
**Format**: `https://fastcomments.com/saml/metadata/{your-tenant-id}`  
**Usage**: Деякі IdP можуть автоматично імпортувати конфігурацію за допомогою цього URL

URL метаданих містить всю необхідну інформацію про SP у форматі XML, що полегшує автоматичну конфігурацію сумісних постачальників ідентифікації.

#### SAML Login URL
**Purpose**: Пряме посилання для ініціації автентифікації SAML для вашого tenant-а  
**Format**: `https://fastcomments.com/saml/login/{your-tenant-id}`  
**Usage**: Направляйте користувачів безпосередньо до автентифікації SAML або тестуйте процес

Ви можете використовувати цей URL для тестування автентифікації SAML або надати користувачам пряме посилання для входу через SAML.

### Підтримувані SAML Binding

FastComments підтримує наступні прив’язки SAML:

#### HTTP-POST Binding
- **Primary Method**: Найпоширеніша прив’язка для SAML-відповідей  
- **Security**: SAML-відповідь надсилається через HTTP POST на ACS URL  
- **Usage**: Рекомендується для продакшн-розгортань

#### HTTP-Redirect Binding
- **Alternative Method**: SAML-відповідь надсилається через HTTP redirect  
- **Limitations**: Обмежений розмір корисного навантаження через обмеження довжини URL  
- **Usage**: Підтримується, але HTTP-POST є бажаним

### Політика Name ID

FastComments налаштовує наступну політику Name ID у SAML-запитах:

- **Default Format**: `urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress`  
- **Alternative Formats**: Persistent, Transient, Unspecified (можна налаштувати)  
- **Requirement**: Адреса електронної пошти використовується як основний ідентифікатор користувача

### Атрибути SAML-запиту

Під час ініціації автентифікації SAML FastComments надсилає запити з такими характеристиками:

#### Request Signing
- **Status**: Опційно (може налаштовуватись)  
- **Algorithm**: Відповідає налаштованому алгоритму підпису  
- **Certificate**: Використовується сертифікат, специфічний для tenant-а, якщо підписування запитів увімкнено

#### Requested Attributes
FastComments запитує наступні атрибути в SAML AuthnRequests:

- **Email**: Обов’язково для ідентифікації користувача  
- **First Name**: Необов’язково для відображення  
- **Last Name**: Необов’язково для відображення  
- **Roles/Groups**: Необов’язково для контролю доступу та дозволів

### Копіювання інформації SP

Сторінка конфігурації SAML надає клікабельні поля, які автоматично копіюють інформацію SP у ваш буфер обміну:

1. Натисніть будь-яке поле з інформацією SP (Entity ID, ACS URL тощо)  
2. Значення автоматично копіюється в буфер обміну  
3. Вставте значення у конфігурацію вашого постачальника ідентифікації  
4. Коротке підсвічування вказує на успішне копіювання

Це спрощує точну передачу інформації SP до вашого IdP без помилок набору.

### Інформація про сертифікат SP

#### Використання сертифіката
- **Purpose**: Шифрує комунікації та підтверджує особу SP  
- **Rotation**: Сертифікати автоматично керуються FastComments  
- **Access**: Публічні сертифікати доступні через URL метаданих

#### Деталі сертифіката
- **Algorithm**: RSA-2048 або вище  
- **Validity**: Сертифікати автоматично оновлюються до терміну дії  
- **Distribution**: Доступні через стандартні SAML-метадані

### Усунення несправностей конфігурації SP

Якщо ваш постачальник ідентифікації повідомляє про проблеми з інформацією SP:

1. **Verify URLs**: Переконайтеся, що всі URL використовують HTTPS і містять правильний tenant ID  
2. **Check Metadata**: Використайте URL метаданих для перевірки конфігурації  
3. **Test Connectivity**: Переконайтеся, що ваш IdP може досягти endpoint-ів FastComments  
4. **Validate Format**: Підтвердіть, що ваш IdP підтримує формат інформації SP

Поширені проблеми включають:
- Неправильний tenant ID у URL  
- Проблеми мережевого з’єднання між IdP і FastComments  
- IdP очікує інші формати URL або додаткові опції конфігурації