Единственная структура, отправляемая через вебхуки, — это объект WebhookComment, описанный ниже на TypeScript.

#### Структура объекта WebhookComment

##### Структура события "Create"
Тело запроса события "create" — объект WebhookComment.

##### Структура события "Update"
Тело запроса события "update" — объект WebhookComment.

##### Структура события "Delete"
Тело запроса события "delete" — объект WebhookComment.

    Изменение от 14 ноября 2023 г.
    Ранее тело запроса события "delete" содержало только id комментария. Теперь оно содержит полный комментарий на момент удаления.


[inline-code-attrs-start title = 'Объект WebhookComment'; type = 'typescript'; inline-code-attrs-end]
[inline-code-start]
interface WebhookComment {
    /** Идентификатор комментария. **/
    id: string
    /** Идентификатор или URL, определяющий ветку комментариев. Нормализовано. **/
    urlId: string
    /** URL, указывающий, где был оставлен комментарий. **/
    url?: string
    /** Идентификатор пользователя, оставившего комментарий. Если SSO, с префиксом tenant id. **/
    userId?: string
    /** Email пользователя, оставившего комментарий. **/
    commenterEmail?: string
    /** Имя пользователя, отображаемое в виджете комментариев. При SSO может быть displayName. **/
    commenterName: string
    /** Исходный текст комментария. **/
    comment: string
    /** Текст комментария после парсинга. **/
    commentHTML: string
    /** Внешний id комментария. **/
    externalId?: string
    /** Идентификатор родительского комментария. **/
    parentId?: string | null
    /** Дата UTC, когда был оставлен комментарий. **/
    date: UTC_ISO_DateString
    /** Суммарная карма (up - down) голосов. **/
    votes: number
    votesUp: number
    votesDown: number
    /** True, если пользователь был залогинен при написании комментария, или если комментарий верифицирован, или если сессия пользователя была верифицирована при оставлении комментария. **/
    verified: boolean
    /** Дата, когда комментарий был верифицирован. **/
    verifiedDate?: number
    /** Пометил ли модератор комментарий как просмотренный. **/
    reviewed: boolean
    /** Локация или base64-кодировка аватара. Будет в base64 только если такое значение было передано через SSO. **/
    avatarSrc?: string
    /** Был ли комментарий помечен как спам вручную или автоматически? **/
    isSpam: boolean
    /** Был ли комментарий автоматически определён как спам? **/
    aiDeterminedSpam: boolean
    /** Есть ли в комментарии изображения? **/
    hasImages: boolean
    /** Номер страницы, на которой находится комментарий при сортировке "Most Relevant". **/
    pageNumber: number
    /** Номер страницы, на которой находится комментарий при сортировке "Oldest First". **/
    pageNumberOF: number
    /** Номер страницы, на которой находится комментарий при сортировке "Newest First". **/
    pageNumberNF: number
    /** Был ли комментарий одобрен автоматически или вручную? **/
    approved: boolean
    /** Код локали (формат: en_us) пользователя на момент написания комментария. **/
    locale: string
    /** @mentions, указанные в комментарии, которые были успешно распознаны. **/
    mentions?: CommentUserMention[]
    /** Домен, с которого комментарий. **/
    domain?: string
    /** Необязательный список идентификаторов групп модерации, связанных с этим комментарием. **/
    moderationGroupIds?: string[]|null
}
[inline-code-end]

Когда пользователи отмечаются в комментарии, информация сохраняется в списке `mentions`. Каждый объект в этом списке имеет следующую структуру.

[inline-code-attrs-start title = 'Объект упоминаний Webhook'; type = 'typescript'; inline-code-attrs-end]
[inline-code-start]
interface CommentUserMention {
    /** Идентификатор пользователя. Для SSO-пользователей будет с префиксом tenant id. **/
    id: string
    /** Финальный текст @упоминания, включая символ @. **/
    tag: string
    /** Оригинальный текст @упоминания, включая символ @. **/
    rawTag: string
    /** Какой тип пользователя был отмечен. user = аккаунт FastComments.com. sso = SSOUser. **/
    type: 'user'|'sso'
    /** Если пользователь отказался от уведомлений, это всё равно будет установлено в true. **/
    sent: boolean
}
[inline-code-end]

#### Используемые HTTP методы

**События "Create" и "Update" используют HTTP PUT, а не POST!**

Поскольку все наши запросы содержат ID, повторение того же запроса Create или Update не должно создавать новые объекты на вашей стороне.

Это значит, что эти вызовы идемпотентны и должны быть событиями PUT в соответствии со спецификацией HTTP.

---